==== 1.4.2.0 ====

=== Major Highlights ===
* Starting from this release we are including TheFind extension.
* New Magento Connect Manager excluded from this version.

== Upgrade Notes ==
* Those who installed Magento version 1.4.2.0-beta1 or 1.4.2.0-rc1 through Magento Connect should reinstall it manually, because this version contains old version of Magento Connect Manager

== Improvements ==
* Added "Switch/Maestro" card type support to centinel 3DS validator. Added comment about maestro and 3d-secure to paypal system config
* Added more flexible filters implementation in collections:
** Varien_Data_Collection::addFilter() registers filters as objects and implements getFilter() method to be able to detect/modify already existing filters
** Varien_Data_Collection_Db::_renderFilters():
*** Added a hook _renderFiltersBefore()
*** Implemented 'public' filter type, which maps the provided filter field from public into internal view and passes the "value" as a condition through _getConditionSql()
** Added $this->_renderFilters() call to abstract EAV collection to accommodate the filters that may be set by addFilter() method
* Added ability to pass multiple recipient emails and names to Mage_Core_Model_Email_Template::send()
* Backordered Item Status for subitems in Orders
** Added correct message at order for all backordered items. At back-end all items shows as backordered if their quantity is below or equal to zero
** Fix of duplication backorder messages for composite product options with same backordered item - saving backorder messages per product id
* Magento Connect Manager
** checking cyclic dependency references and conflicts with local files
**  implemented adding to MCM manually installed extension
** changed upgrade logic, previous version of package should be deleted before install new
** Implemented new download process and dependencies rules
** Added correct behavior during extension reinstall, so dependencies will not reinstall automatically
* Optimized rewrite selection from DB, added url rewrite and suffix validation at admin backend
* Added verification of access level for app/etc/local.xml. 
** Now if server configuration has issue and this file accessible from browser admin user gets notification in backend.
* Upgraded Zend Framework to version 1.10.8
* Added the Recurring Profiles tab in customer management
* Implemented cache for shipping rates and fixing issues with rounding
* Design packages and themes optimization/refactoring/improvements:
** minor improvements and fixes
** improved upgrade-ability of CE themes
* iPhone Theme Refactoring
* Added Widget settings sharing between widget types
* For Invoices, Shipment, Credit Memos added possibility to show admin comments at user frontend (checkboxes "Visible on Frontend" in admin interface)
** Added JS to enables/disable checkbox 'Append Comments' depending on checkbox 'Email Order Confirmation'
** Refactored invoice/shipment/refund comments collections models to one abstract Comment Collection Model
** Refactored Block Order Invoice/Shipment/Creditmemo comments to usage of common block and design - Block Order Comments
* A little more accurate profiler - important for very quick measurements
* Add Shopping Cart API
* Implementing payment refund notifications
* Added website price scope for bundle items
* Added support of pending transaction to payflow pro. Also fixed "denied payment review" message in payment
* Upgraded TinyMCE to v.3.3.7
* Added to prototype validation by length min-length validation
* Added Varien.DateElement for front-end date form fields and re-implemented Varien.DOB
* Added functionality to disable dashboard charts in backend (System > Configuration > Admin > Dashboard)
* Added functionality to disable dashboard charts during installation
* Adminhtml W3C Validation improvements
* Added ability to use session save method from configuration
* Rendering customer attributes
* Added favicon manager under System > Configuration > Design > HTML Head

== Changes ==
* Refactored shipping rates calculation to keep process solid and do not try to recreate internal process of calculation, as it was
* Added caching of requests to shipping carriers, because otherwise we get too much duplicate requests during calculation of every shipping method
* Refactored "Special products" RSS feeed
* Shortened the names of all foreign keys longer than 49 characters
* Compilation scope for some EAV models which was causing blank page after enabling compilation
* Deleted Mage_Sales_Model_Recurring_Profile_Info, which was not on its place and added accidentally
* Category and product design settings inheritance logic
* Refactored one routine in Inventory Observer to remove code duplication
* Disabling product attribute usage in promo rules not affect existing promo rules
* Refactoring validation states for Centinel
** Added template method Mage_Centinel_Model_StateAbstract::isLookupSuccessful
* Add boolean type for catalog price rules and condition for category_ids
* Removed Maestro/Switch/Solo card from system. Added Maestro/Switch and Solo cards to Chronopay and Cybersource methods
* Mage_Adminhtml_Block_Sales_Order_Creditmemo block had dependence from 'canCapture' 'canCapturePartial'. It was changed to 'canRefund' 'canRefundPartialPerInvoice'. For set result of Mage_Adminhtml_Block_Sales_Items_Abstract::CanEditQty`s we can use setCanEditQty
* Added Maestro/Switch and Solo Dollars card types for paypal_direct payment method. Also removed Maestro/Solo/Switch card type for this method
* Removed "Shipping address" block on recurring profile view page if product is virtual. Also fixed virtual order detection
* Refactored PayPal cart line items and cart totals calculation to accommodate various discounts and tax settings
** added hidden discount and hidden shipping taxes to the calculation
** eliminated cart line items logic from the helper, moved it to the paypal/cart model
** simplified transferring of the totals and line items to PayPal API objects
* Refactored sales rule discount detection on "buy_x_get_y" rule type
* Added catalog_product table definition to product review collection
* Changed type of obscure input field to 'password', so this field is hidden even when user enters data in it
* Removed dependence to payment method on getting billing agreement method title. For now payment method title stored in billing agreement
* Removed invoice creation thought zero subtotal checkout with new order status "pending"
* Removed SID from url generation when Use SID on Frontend option is disabled
* Added customer session validation for loadCustomerQuote method
* Iphone clears.css has been deleted

== Fixes ==
* Fixed Default shipping address is passed to PayPal instead of the selected shipping address
 * reverted cloning of shipping address and it's setting to quote.
 * implemented method assignCustomerWithAddressChange() with setting billing and shipping addresses
* Fixed Added transferring of last four digits of credit card number to give possibility refund authorize transactions.
* Fixed Returning from paypal cancel existing order
 * Canceling order in cancelAction() only if it was placed from current quote
* Fixed Taxes->Incorrect product price and tax value on the last chechout step
* Fixed Opening bestseller product (admin/dashboards) results in adding new product
** fixed case when dashboard shows report for non-existing product (i.e. deleted one)
* Fixed Bestsellers statistic bug
** removed NULL values from statistic tables and changed foreign keys to cascade deleting stats for deleted products
* Fixed Gift message displaying conditions not properly work on frontend and backend
* Fixed QTY of product is incorrectly showed in Customer's Current Activities - Shopping Cart and Customer's Shopping Cart.
* Fixed Gift message displaying conditions not properly work on frontend and backend - fixed missed bracked
* Fixed Magento Connect Manager -> No warning message
* Fixed Unable to upload community extention in Magento Connect Manager without Community Channel installed
* Fixed Bundle product price calculated not correctly
* Fixed Customer's email doesn't escalate to billing/shipping addresses
** added copying email field from quote address to order address
** added sending email to PayPal, when user's address doesn't contain email info
* Fixed Catalog-specific attribute options do not load when using through catalog/output helper
** method _getLoadDataFields at product attribute resource collection modified to select additional needed fields;
* Fixed saving attribute value in store view scope only
* Fixed Not searchable attributes are searched by Quick search.
* Fixed Customers won't appear in the search results on the customer grid in the admin
* Fixed Huge memory consumption on flat shipping rates import
** decrease to 5000 count of data wich inserts into DB in one iterate, to avoid exceed of 128M memory_limit
* Fixed Config fields "Disable output" doesn't implement inherited value
* Fixed Category created for some store view not displayed on frontend
** include_in_menu attribute was made as required to set default value when category created in specified store
* Fixed creating of  "Shopping Cart Price Rule'
** setActualProductAttributes method was called with 'attribute_set_id' value in $attributes param. But it does not exist in 'eav/attribute' table. So we need to check it
* Fixed PayPal PE transaction_id detection: Overrided getPaypalTransactionId method in PE API -  changed transaction id getting to process payflow accounts not assigned to paypal side
* Fixed Configurable Product Catalog Price Rule Issue: the main idea is to calculate price rule on configurable price separately from base price
* Fixed fatal error during import large file
* Fixed Shipping information is not displayed in backend after Google Checkout operations
* Fixed Field Mapping Issue during customer import
* Fixed CMS blocks grid inoperable with store filter in GWS-limited mode
* Fixed incorrect qty increment behaviour
** qty increment not decimal validate
** when adding product with qty increment to cart - redirect to product's page
** generate message about mismatch of qty increment when editing item qty at cart
* Fixed ups/usps and Guam
* Fidex issues with attaching product to multiple stores: refresh product index query update
* Fixed displaying of bundle product weight
* Fixed "Select a PayPal Solution" checkbox bug: Website Payments Pro and  Website Payments Pro Payflow Edition consider each other status in their checkboxes control logic
* Fixed Invoice Comments Stripped When Quantities Updated
* Fixed XSS security issue on frontend
* Fixed Google Chekout: Discount for shipping amount doesn't apply
* Fixed XSS issue in address form
* Fixed Address in the customers address book cannot be deleted
* Fixed CatalogSearch_Fulltext not being renewed for configurable products when editing attached simple products
* Fixed Google Checkout: shipping method info is empty at order page in admin backend
* Fixed Google Checkout: with discounted shipping - discount is applied again
* Fixed Wrong timezone/DST in reports
* Fixed coupon_code attribute inconsistency in some upgrade paths (from 1.4.0.0 to 1.4.1.0)
* Fixed  Created extension archive through Magento Connect include ".svn" directories
* Fixed version of downloader
* Fixed Magento Connect: User should has a possibility to choose version for extension upgrade
* Fixed Magento Connect: User shouldn't be able to download Magento into "0000 permissions" folders
* Fixed Magento Connect: JS validation is absent for "Authors" tab on  package extensions page
* Fixed Magento Connect: Saving information on settings page
* Fixed Magento Connect: "Configuration" step - server validation is absent during installation
* Fixed Magento Connect: "Log in" page - Message or some information about required fields doesn't appeared
* Fixed Magento Connect: "Configuration" step - incorrect message appeared during installation
* Fixed wrong shipping price in case of sales rule with fixed cart discount and 1 item in cart
* Fixed the label for the configurable product attribute does not reflect correctly on the frontend
* Fixed sales rule with fixed discount for whole cart doesn't work
* Fixed "Slash for category or product urls causes error 404" 
* Fixed Shared shopping cart on the stores with different domains
** check origin url in all store urls
** prevent to getting SID param from current query
* Fixed #18454: Import profiles do not reset websites values
* Fixed Issue with zero grand total express checkout for recurring products.
* Fixed "Allow Gift message" setting on the product page doesn't work in Front.
* Fixed "Duplicate" of bundle product leads to an error
* Fixed Catalog sitemap for categories shows inactive sub categories if flat catalog enabled
* Fixed Added support of all product attributes in conditions/actions of salesRules.
* Fixed Disabling product attribute usage in promo rules not affect existing promo rules
* Fixed "Cart Price Rule not working with Product Attributes" (boolean values not properly shown in rule conditions)
* Fixed Wrong amounts invoiced with FPT
* Fixed Wrong order status after refund and additional related issue on frontend during checkout
* Fixed Unable to delete uploaded sample for downloadable product
* Fixed Paypal Direct send wrong billing address to API
* Fixed Incorrect viewing of category settings after refreshing page
* Fixed Catalog price rule discount not working during backend order creation
* Fixed Double headers for session cookie set
* Fixed Custom design is not reset properly after shipment comment emails
* Fixed Tax report displays incorrect figures
* Fixed Removed invoice creation on "completed" IPN message with payment_entity = "auth" to prevent double capture creation on single transaction with IPR.
* Fixed Image browser in WYSIWYG editor doesn't fill mouse over/out fields
* Fixed Added rounding to "Refund Shipping" field on credit memo creation page.
* Fixed Added additional error messages to customer address validation on PHP side while creating.
* Fixed "No server side check for password length when customer edits his account information" 
** Also added proper processing for password == '0', earlier it was considered as non-set password
* Fixed WYSIWYG editor breaks directives that are not in src attribute
* fixed directives decoding for a case when the secret key is present in URLs
* Fixed Duplicate of a product creates it with no SKU value and is saved
* Fixed Redundant catalog product attribute "category_ids" remains during upgrade from 1.3 to 1.4
* Fixed Reports/Shopping cart/Products in carts optimization
* Fixed "If all Storeviews value set up - disabled --> Front end shows default storeview instead of 404 page"
* Fixed Added error on zero subtotal checkout with paypal express. Removed paypal express button on shopping cart with zero grand total.
* Fixed Field labels and field values are not aligned vertically on Sales Orders in Admin
* Fixed Spacing between field labels and field values is inappropriate on the Recurring Profiles tab in My Account section
* Fixed Not searchable attributes are searched by Quick search.
** Checking if attribute used in quick search before adding to fulltext field
* Fixed Mage_Customer_Model_Customer::getGroupId can't return zero value
* Fixed #23184: Huge memory consumption on flat shipping rates import
* Optimized and refactored Table Rate import
* Fixed Scrolling during category load results in some js-errors
* Fixed "Javascript alert on "manage category" page"
* Fixed Security Vulnerability on Mage_Core_Block_Template level
* Fixed Merged CSS breaks Secure Pages (https)
* Fixed SOAP webservices do not work when enabling "Add Store Code to URLs"
* Fixed Incorrect displaying of the Start Date entered by customer while adding to the cart recurring product
* Fixed Downloadable Product "lable" typo
* Fixed While creating gift message from backend it disappears in case of refreshing page
* Fixed Product export fails when the quantity of exported products is 25 000 or more (memory leak in products)
* Fixed While creating gift message from backend it disappears in case of refreshing page
* Fixed Google Chekout: Discount for shipping amount doesn't apply
** onepage checkout recalculates shipping charges after setting the payment method (not solved yet in multishipping)
** added warning about Carrier Calculated Shipping in Google Checkout system configuration
** GC API callback now sets the payment method to quote on requests
** the free shipping calculator now marks the entire address as "free shipping" if all its items have free shipping
* Fixed On wide monitors checkbox "Create Permanent redirect" in admin backend wraps up to the end of input box
* Fixed Tag isn't showed in Product Page and My account->My Tags, if tag are deleted by customer, approved by administrator, added by customer
* Fixed Non standard images make troubles with "Next"/"Previous" buttons
* Fixed There is no validation of the Tracking number field during first time creation of the shipment
* Fixed Missed dollar sign in variable name
* Fixed Incorrect escaping of Mage_Catalog_Model_Abstract::loadByAttribute method
** Zend_DB_Select::where must get null values to skip quoting into $cond empty strings if value is null
* Fixed "URL rewrites duplicating when assigning to root category"
* Fixed Shipping method UPS_XML missing titles
* Fixed The pager is missing for tagged product list
* Fixed Report > Products Ordered ignores Store view switcher
* Fixed Flat catalog index problem after upgrade with customizations present
* Fixed Incorrect bundle items inventory decrements
* Fixed Category and product design settings inheritance
* Fixed Removed fatal error on removing non existent quote item from quote
* Fixed Credit Card Maestro/Solo: The field "Start Date" is not displayed on order information page
** deleted unused Maestro/Solo from Payment module config
** moved Maestro/Switch and Solo card definition from Chronopay to Payment module config
** deleted Meastro/Switch definition with incorrect code MS from Cybersource module config
** fixed logic of showing "Issue number" and "Start Date" of Switch/Solo card on frontend
* Added warning about offline refund
* Fixed Mage_Checkout_Block_Cart_Item_Renderer::getIsInStock bug
* Fixed Fatal on edit configurable product page, if custom required price attribute is used
* Fixed #0011135: View invoice error with changed query string
* Fixed Trailing semi-colon displayed on Profile Export page
* Fixed New Orders & Other Authenticated RSS feeds should use HTTPS
* Fixed Dataflow export products sku filter works as not "starts with", but "like"
* Fixed Removed default shipping address assign on paypal express checkout
* Fixed The customers from Puerto Rico can't pay with PayPal (Express Checkout in PaypalUk)
* Fixed Shared shopping cart on the stores with different domains
* Fixed Discount amount for the whole cart divide proportionally between all affected items according to their base price and then applied.
* Fixed Removed store selector in single store mode on url rewrite edit page
* Fixed Javascript validator's translation strings missing
* Fixed Quick Search Autocomplete does not work via ajax http protocol for https page
* Fixed Inventory->Qty Increments - unable to add
* Fixed Loading search query performance issue
* Fixed Changed labels in checkout and payment information blocs for credit cards Solo Maestro Switch 
* Fixed Product q-ty doesnt decrease after google checkout
** added same 'checkout_submit_all_after' event to  AmazonPayments
** removed 'TODO' notice from Multishipping Checkout, because current scheme is better and will not be influenced by any Multishipping refactoring
** fixed Observer reaction on 'checkout_submit_all_after' to include needed reindexing
* Added checkout_multishipping_controller_success_action and checkout_onepage_controller_success_action events that pass the created order ids on frontend checkout success actions
* Fixed Google Analytics tracking pages with wrong URI:
** Completely reimplemented googleanalytics/ga block:
*** it doesn't depend on session/quote, but just uses order_ids, if passed
*** the page_name parameter is reimplemented as it was intended to be: an optional parameter that can be customized via layout for certain actions
*** moved out the integration part with google checkout to observer
*** eCommerce tracking passes shipping address instead of the billing address, if available
*** replaced the "affiliation" into store frontend name in eCommerce tracking (as it is intended to be)
*** eliminated passing order item "category" in eCommerce tracking (that never existed)
*** optimized javascript code of GA with Google Checkout integration
** Eliminated mutual code coupling between Google Analytics and Google Checkout modules
** Improved integration of Google Analytics and Google Checkout:
*** the GA integration should appear only when GC buttons are available
*** there will be no integration when there is no GA tracking code configured
*** the GA/GC integration seems like wasn't working because there was no pageTracker js variable accessible to the GC scripts
* Fixed Wrong links in backend to "New Products/Low Stock/Customer reviews" RSS feeds
* Fixed "Send auto-generated password" generates e-mail with incorrect template
* Fixed Unable to refund Credit Memo because of Shipping Rounding
* Fixed Added custom option info to recurring profile info page on frontend and backend.
* Fixed Product Visibility and Status disappear when in search
* Fixed Removed validation of new customer shipping address on backend for orders with virtual products only 
* Fixed ability to buy Product which have status "Out of Stock" through a direct link on button "Checkout with PayPal"
* Fixed All free shipping methods in absent in Transfer Shipping Options menu on PayPal side
* Fixed Payment methods titles for the PDF prints through admin gets from default config instead of the storeview config
* Fixed PayPal and Puerto Rico shipping address
* Fixed "Transfer Shipping Options" pass on PayPal side not correct value for Flat Rate method
* Fixed Centinel JCB validation test cases 8-9
* Fixed Saving caterory in store view scope
* Fixed Attribute upgrades moved from 1.4.0.0.15 to 1.4.0.0.33
* Fixed that product tagged by administrator has wrong URL at front-end
* Fixed refusal from Card Verification (through link Exit), does not allow to place order repeatedly
** If lookup was filed and customer tries again we will do new lookup.
** If lookup was success and customer tries again without some changes we will not do new lookup
** If authentication was filed and customer tries again we will do new lookup and authentication
** If authentication was success and customer tries again without some changes we will not do new lookup and authentication
* Fixed #22536: Light-weight email templates. Wishlist share email fix
* Fixed declaration of Mage_Cybersource_Model_Api_ExtendedSoapClient::__doRequest() compatibility with SoapClient::__doRequest()
* Fixed Two registration emails from a wrong store and without a logo are sent when a customer is created in Admin panel
* Fixed Reindex for bundle products with date fields
* Fixed Status is "Ready" instead to be "Reindex required" then creating new subcategory in mode "Manual Update"
** index status changed to STATUS_REQUIRE_REINDEX when search engine changes
* Fixed #23321: Wrong type casting in method
* Fixed Print-All Includes Tracking # from All Shipments on Every Shipment
* Fixed Ignored 'Include in Navigation Menu' category option with enabled flat catalog.
* Fixed Admin unable to add Image through WYSIWYG to description and Short description without intermediate product saving
* Fixed QTY decrement after multishipping
* Double clicking adds product to cart twice
* Fixed Catalog Price Rule(for NOT LOGGEN IN customers) is not applied for shopping cart and while checkout as guest or while first registration.
* Fixed Payment methods titles for the PDF prints through admin gets from default config instead of the storeview config
* Fixed Mage_Adminhtml_Model_System_Config_Backend_Serialized::_afterLoad() does not check input for unserialize()
* Fixed Sending letters through "Contact Us" form, leads to error
* Fixed PayPal Express with Flat Rate: incorrect counting Shipping amounts per order
* Fixed Saving attribute value in store view scope only causes data loss.
* Fixed #22607: Dispose of Mage_GiftRegistry module
* Fixed Related products are not saved when you attach them to a product
* Fixed Added qty to bundle unit price calculation to quote totals recalculating.
* Fixed Saving category cause: 'Exception' with message 'File was not uploaded.' in /home/vadim.kusakin/dev/qa/2759/lib/Varien/File/Uploader.php:139
* Fixed Fixed MAGE-638 Magento Connect -> MCM -> If agreement checkbox is unchecked, "Continue" button should be disabled
* Fixed Set the same column font size as in cells in PDF documents printing
* Fixed Home page appears instead of predefined 404 page
* Fixed Removed converting of "is one of" and "is not one of" values in decimal.
* Fixed Wrong column type for order_increment_id on Invoice, Shipments, Creditmemo grids
** order_increment_id was setted as "text" instead of "number" type
* Fixed Inconsistency with credit memos showing buttons online vs offline
* Fixed PayPal Express shortcut is missed on product page
* Fixed An email is sent to a customer after its profile is edited in the Admin panel
* Fixed that Payflow Pro includes only the first line of billing/shipping addresses into request
* Fixed Incorrect showing of product page when inputing a product description with table which have attribute align = left
* Fixed Wrong link for bestsellers in admin dashboard. Grids.php fixture doesn't do anything for this bug - just to beautify code.
* Fixed Added fixes to reports - base_discount_amount is actually kept negative in DB.
* Fixed Empty dropdown 'status' at the creation New Review Grid.
* Fixed Incorrect work of "Recently Compared Products" functional on category's page
* Fixed behavior when having single store, javascript raises exception and all followed code is not executed
* Fixed that Special price for dynamic bundle applies twice
* Fixed #21960: Labels in page/html_wrapper and core/text_list in layout 
* Fixed GUI bugs on Recurrent Profile frontend part
* Fixed Magento Connect -> Message about invalid URL is duplicated
* Fixed that suspend Recurring Profile from front side leads to error
* Fixed Missing pager for tagged product list
* Fixed Wrong profiler output for getUrl in Category
* Fixed Saving of billing agreement relation with order - added force billing agreement re-saving and fixed isValid method in agreement detection.  
* Fixed Incorrect sort order reliable on mysql internal order during eav attribute load
** move prepare select to separate method
* Fixed passing additional totals to PayPal when cart line items are disabled:
** simplified paypal/abstract api to just set the paypal/cart instance and the needed configuration settings
** moved workarounds of setting shipping and discount totals as line items into the appropriate APIs: WPS and NVP
* Fixed In My product Review short description HTML tags are shown
* Fixed that Refund from google chekout don't display on the order in Magento
* Fixed that "Compare Products" block does not appear on the category page and product page
* Fixed Non-existing attribute's source model causes fatal error
* Fixed Varien_Db_Select memory leak
* Fixed #18569: Gift Messages not in OrderInfo returned array
* Fixed PayPal API credentials wizard popup size
* Fixed #11449: customer_id is mismatch with entity_id in customer.create
* Fixed merging CSS-files with different skin domain to pick a proper base URL
* Fixed Bad UI style on checkout success page
* Fixed buying more than 1 virtual product in multishipping checkout
* Fixed #22518: Wrong amount for second refund
* Fixed #22776: Bug Causing Recursion Error
* Fixed #22668: Incorrect reports for coupons
* Fixed Products -> Product with "Out of stock" status displayed on frontend, but shouldn't
* Fixed Password miss match for newly created in Back end customer
* Fixed "There has been an error processing your request" page is displayed when specified order status is selected on Reports->Sales->Tax page
* Fixed bug with 'Use Flat Catalog Category'
* Fixed #13770, #16300, #21040 : Product Media Api Broken, product_media.create API overwrites image itself each upload, product_media.update API does not upgrade the image itself
* Fixed #16306: Webservice with htaccess (changes in code style)
* Fixed #22536: Light-weight email templates 
* Fixed #18935: Soap api v2 multiple complexFilters with the same key
* Fixed incorrect Window titles on frontend
* Fixed Eliminated display currency usage (instead of the base website currency) in shopping cart price rule conditions
* Fixed #21146: Magento falls into the white screen when saving URL rewrite for a product on the Default Store View
** corrected syntax mistakes
* Fixed batch of issues related to google checkout:
** Invoice don't create automatically with Google Checkout
** Google checkout invoice duplication
** Automatically authorize the buyer's credit card for the full amount of the order
** Refund from google checkout don't display on the order in Magento
** Google Chekout: Discount for shipping amount doesn't apply
** Different order amount in Google checkout and Magento orders
** Applying of discount for shipping, when using google checkout
** Order is in google sandbox doesn't contain gift card
* Fixed #23461: Wrong attribute value in catalog link widget XML
* Fixed getting complete state for orders with zero grand total when processed
* Added Store id param to billing agreement entity.  Also fixed store setting in billing agreement payment method.
* Fixed fatal error in payment method list fetching (MAGE-500)
* Fixed #22575: Trace error during using filter "Products" on Tags page
* Fixed Grids with settings remain active while disabled PayPal methods
* Fixed configuration merger fatal error when store/website resource structure is inconsistent
* Fixed PayPal admin setup: checkbox problem
* Fixed Adding shipping address transferring on non guest checkout in Paypal Standard
* Fixed "Save in address book" checkbox in the Shipping address area doesn't work while admin order creation
* Fixed pre-selecting default address during checkout
* Fixed Email with empty password is sent to a customer after an order is created in the Admin panel
* Fixed Necessary to add data validation for filed "Trial Billing Frequency" in Recurring Profile
* Fixed "Out of Stock" product is possible to purchase successfully through Shortcut button
* Fixed phpdocs in lib/Varien and removed junk file
* Fixed #21146: Magento falls into the white screen when saving URL rewrite for a product on the Default Store View
* Fixed #21643: Fixed "wsdl" parameter validation for Soap V2
** Changed class SoapServer with class Zend_Soap_server
** Added ability to set response charset from admin panel: System->Configuration->Magento Core API
* Fixed #21499: Default billing and shipping address
* Fixed #21565: missing "comment" for salesOrderStatusHistoryEntity
* Fixed #20481: Access Control List not retrieved for API user for resources() and resourceFaults() operations
* Fixed #18367: FCGI Error on WSDL Url with Apache and mod_fastcgi
* Fixed #22053: use HTTP 301 code instead of 302 in case of web/url/redirect_to_base
* Fixed #20654: Admin order creation->Move mouse cursor isn't changed into hand while move it on some product for adding 
* Fixed #21590: Attribute 'Date': testing for uniqueness fields not working
* Fixed #21566: Type of attribute 'Price': Possible to add text value for field 'default value'
* Fixed #22053: added optional behavior (301 or 302)
* Fixed #21570: Review from not logged in user is saved in list of All Reviews when "Allow guests to write reviews = No"
* Fixed #22090: Different values of Qty Increments during create and after duplicate products
* Fixed #22489: Eliminate difference between bundle.js in different skins 
* Fixed #22419: Set default stock_data if not exist in create/update product
* Fixed #20227: "Review(x)" link should be added to the compare page.
* Fixed #21570: Review from not logged in user is saved in list of All Reviews when "Allow guests to write reviews = No"
* Fixed #20959: Locale problem in shipping tracking popup raises exception 
* Fixed #21955: Layout cache ignores product column count update
* Fixed #20011: After using filter "Color" or "Manufacture" in Configurable Product meaning from column is disappear
* Fixed #21908: Incorrect attribute ordering in "Compare products" page.
* Fixed #22222: Edit review-> if browse stores in the "Visible In " drop-down, rating values reseted 
* Fixed #22075: Product Attribute title specified for StoreView isn't showing on the configurable product's page
* Fixed #22605: catalog_category.level return root categories when website or store are null
* Fixed #21806: Different values display on the shopping cart in front-end and back-end 
* Fixed #20113: Shipping address display as default on the front-end and as not default on admin for one customer 
* Fixed #22575: Trace error during using filter "Products" on Tags page
** added 'filter_index' to array parameter in addColumn() method call
* Fixed #14591: Incorrect SKU for Configurable Product with Custom Options 
* Fixed #22476: Blank Column in Related Products Grid
** deleted duplicate <col> output for editable columns
* Fixed #22575: Trace error during using filter "Products" on Tags page
** apply filter_index field values to index
* Fixed #22644: A discrepancy between GT(Base) and GT(Purchased) 
* Fixed #22645: Incorrect original price when using custom price in order. 
* Fixed #22653: Missed checking for file existence in JS/CSS merger
** checking in source file exists. If not - do not check last modification and force to merge target file again
* Fixed #22594: Unable to place orders through checkout with multiple addresses with PayPal direct + zero subtotal for one order 
* Fixed #21185: Newsletter confirmed automatically BEFORE account email is confirmed. 
* Fixed #22167: "Add new row" button in downloadable product 
* Fixed #21952: BUG - Category / Url Model (UYN-886991) 
* Fixed #15334, #17794
** API category did not pass validation process due to available_sort_by must be ArrayOfString
** Added category validation for backend (missed)
** Creating separate validation for available_sort_by and default_sort_by attributes
* Fixed #22599 Upgrade from 1.1.8 to 1.8.0.0 database compatibility issues (PARTIAL)
* Fixed #22661: 1 cent bug 
* Fixed #22434: 100% discount of products -> the amounts of Tax and Grand Totals are or negative or not corectly 
* Fixed #10073: Unnecessary option for downloadable products
* Fixed #20014: Qty use decimals for downloadable
* Fixed #22164: Incorrect message for maximum shipping amount
* Fixed #22174: Custom 'Qty to Refund' isn't remembered after message about incorrect amount
* Fixed #22182: The value of 'Customer Since' field to duplicate clients at different sites.
* Fixed #22243: Add new review by admin->type of this review is 'guest', but should be 'administrator'
* Fixed #22313: Time of order creation if not displayed by the "Order Created At (datetime)" template variable.
* Fixed #22348: "Add to card" button is absent for giftcard product in the catalog
* Fixed #22640: Creating customer unable after adress tab manipulations
* Fixed #22670: Credit memo - incorrect shipping price displaying
* Fixed #22798: Excl and Inc. Tax don't display on the Estimate Shipping and Tax block
* Fixed #20088: Admin able to push on-line refund button for the capture off-line invoice
* Fixed #16306: Webservice with htaccess. Added server authorization (.htaccess)
* Fixed #22266: HEADERS ALREADY SENT Error during dataflow import
** Additionally: moveing layout update in separate layout file of dataflow module.
* Fixed #21412: The "Save Attribute" and "Save and Continue Edit" buttons become disabled after saving attribute with attribute code that exists
* Fixed #22844: After login to admin got 404 instead Startup Page 
* Fixed #22852: shopping cart price rule - search by ID - error page 
* Fixed #15897: Unsubscription Email Sender in the Newsletters Subscription Options is not working correctly
* Fixed #15899: Newsletters subscription confirmation in not working
* Fixed #22908: Grid Serializer doesn't handle dropdowns as edit columns
* Fixed #22946: 'Products Tagged by Administrators' grid contains information about product that is assigned by the customer
* Fixed #22935: Issue with Google AdWords and DSMM Code 
* Fixed #22910: view of system/design table with no records under IE 8 
* Fixed #22914: view of URL rewrite table with no records under IE 8
* Fixed #22935: Issue with Google AdWords and DSMM Code 
* Fixed #22536: Light-weight email templates 
* Fixed #23017: Memcache session fallback does not work
* Fixed #22992: Trace appears during create reorder from front-end 
* Fixed #22991: Cannot add items to shopping cart after active 'Use Flat Catalog Product' 
* Fixed #22813: Google base Undefined Offset when Managing attribute mapping
* Fixed #23138: URL rewrite error on product creation
* Added Regions for baltic states and Finland
* Fixed #23092: Memcached and compiler
* Fixed #19804: sorting/searching by "inventory" field
* Fixed #23241: Catalog price rule not correctly appy for customer group
* Fixed #16294: WSDL missing attributes for customerCustomerEntity
* Fixed #22851: Used wrong resource model for api/user
* Fixed #18207: SOAP-ERROR: Parsing Schema: can't import schema from 'http://schemas.xmlsoap.org/soap/encoding/'
* Fixed Fatal error: Call to undefined function eaccelerator_fetch()


==== 1.4.x-devel-83018 ====

== Fixes ==
* Fixed Opening bestseller product (admin/dashboards) results in adding new product
** fixed case when dashboard shows report for non-existing product (i.e. deleted one)
* Fixed Bestsellers statistic bug
** removed NULL values from statistic tables and changed foreign keys to cascade deleting stats for deleted products
* Fixed Gift message displaying conditions not properly work on frontend and backend
* Fixed QTY of product is incorrectly showed in Customer's Current Activities - Shopping Cart and Customer's Shopping Cart.
* Fixed Gift message displaying conditions not properly work on frontend and backend - fixed missed bracked
* Fixed Magento Connect Manager -> No warning message
* Fixed Unable to upload community extention in Magento Connect Manager without Community Channel installed
* Fixed Bundle product price calculated not correctly
* Fixed Customer's email doesn't escalate to billing/shipping addresses
** added copying email field from quote address to order address
** added sending email to PayPal, when user's address doesn't contain email info

==== 1.4.x-devel-82478 ====

== Improvements ==
* Added "Switch/Maestro" card type support to centinel 3DS validator. Added comment about maestro and 3d-secure to paypal system config
* Added more flexible filters implementation in collections:
** Varien_Data_Collection::addFilter() registers filters as objects and implements getFilter() method to be able to detect/modify already existing filters
** Varien_Data_Collection_Db::_renderFilters():
*** Added a hook _renderFiltersBefore()
*** Implemented 'public' filter type, which maps the provided filter field from public into internal view and passes the "value" as a condition through _getConditionSql()
** Added $this->_renderFilters() call to abstract EAV collection to accommodate the filters that may be set by addFilter() method
* Added ability to pass multiple recipient emails and names to Mage_Core_Model_Email_Template::send()

== Changes ==
* Refactored shipping rates calculation to keep process solid and do not try to recreate internal process of calculation, as it was
* Added caching of requests to shipping carriers, because otherwise we get too much duplicate requests during calculation of every shipping method
* Refactored "Special products" RSS feeed

== Fixes ==
* Fixed Catalog-specific attribute options do not load when using through catalog/output helper
** method _getLoadDataFields at product attribute resource collection modified to select additional needed fields;
* Fixed saving attribute value in store view scope only
* Fixed Not searchable attributes are searched by Quick search.
* Fixed Customers won't appear in the search results on the customer grid in the admin
* Fixed Huge memory consumption on flat shipping rates import
** decrease to 5000 count of data wich inserts into DB in one iterate, to avoid exceed of 128M memory_limit
* Fixed Config fields "Disable output" doesn't implement inherited value
* Fixed Category created for some store view not displayed on frontend
** include_in_menu attribute was made as required to set default value when category created in specified store
* Fixed creating of  "Shopping Cart Price Rule'
** setActualProductAttributes method was called with 'attribute_set_id' value in $attributes param. But it does not exist in 'eav/attribute' table. So we need to check it
* Fixed PayPal PE transaction_id detection: Overrided getPaypalTransactionId method in PE API -  changed transaction id getting to process payflow accounts not assigned to paypal side
* Fixed Configurable Product Catalog Price Rule Issue: the main idea is to calculate price rule on configurable price separately from base price
* Fixed fatal error during import large file
* Fixed Shipping information is not displayed in backend after Google Checkout operations
* Fixed Field Mapping Issue during customer import
* Fixed CMS blocks grid inoperable with store filter in GWS-limited mode
* Fixed incorrect qty increment behaviour
** qty increment not decimal validate
** when adding product with qty increment to cart - redirect to product's page
** generate message about mismatch of qty increment when editing item qty at cart
* Fixed ups/usps and Guam
* Fidex issues with attaching product to multiple stores: refresh product index query update
* Fixed displaying of bundle product weight
* Fixed "Select a PayPal Solution" checkbox bug: Website Payments Pro and  Website Payments Pro Payflow Edition consider each other status in their checkboxes control logic
* Fixed Invoice Comments Stripped When Quantities Updated
* Fixed XSS security issue on frontend

==== 1.4.x-devel-81496 ====

== Improvements ==
* Backordered Item Status for subitems in Orders
** Added correct message at order for all backordered items. At back-end all items shows as backordered if their quantity is below or equal to zero
** Fix of duplication backorder messages for composite product options with same backordered item - saving backorder messages per product id
* Magento Connect Manager
** checking cyclic dependency references and conflicts with local files
**  implemented adding to MCM manually installed extension
** changed upgrade logic, previous version of package should be deleted before install new
** Implemented new download process and dependencies rules
** Added correct behavior during extension reinstall, so dependencies will not reinstall automatically

== Changes ==
* Shortened the names of all foreign keys longer than 49 characters

== Fixes ==
* Fixed Google Chekout: Discount for shipping amount doesn't apply
* Fixed XSS issue in address form
* Fixed Address in the customers address book cannot be deleted
* Fixed CatalogSearch_Fulltext not being renewed for configurable products when editing attached simple products
* Fixed Google Checkout: shipping method info is empty at order page in admin backend
* Fixed Google Checkout: with discounted shipping - discount is applied again
* Fixed Wrong timezone/DST in reports
* Fixed coupon_code attribute inconsistency in some upgrade paths (from 1.4.0.0 to 1.4.1.0)
* Fixed  Created extension archive through Magento Connect include ".svn" directories
* Fixed version of downloader
* Fixed Magento Connect: User should has a possibility to choose version for extension upgrade
* Fixed Magento Connect: User shouldn't be able to download Magento into "0000 permissions" folders
* Fixed Magento Connect: JS validation is absent for "Authors" tab on  package extensions page
* Fixed Magento Connect: Saving information on settings page
* Fixed Magento Connect: "Configuration" step - server validation is absent during installation
* Fixed Magento Connect: "Log in" page - Message or some information about required fields doesn't appeared
* Fixed Magento Connect: "Configuration" step - incorrect message appeared during installation
* Fixed wrong shipping price in case of sales rule with fixed cart discount and 1 item in cart
* Fixed the label for the configurable product attribute does not reflect correctly on the frontend
* Fixed sales rule with fixed discount for whole cart doesn't work

==== 1.4.x-devel-80991 ====

== Improvements ==
* Optimized rewrite selection from DB, added url rewrite and suffix validation at admin backend
* Added verification of access level for app/etc/local.xml. 
** Now if server configuration has issue and this file accessible from browser admin user gets notification in backend.

== Changes ==
* Compilation scope for some EAV models which was causing blank page after enabling compilation

== Fixes ==
* Fixed "Slash for category or product urls causes error 404" 
* Fixed Shared shopping cart on the stores with different domains
** check origin url in all store urls
** prevent to getting SID param from current query
* Fixed #18454: Import profiles do not reset websites values
* Fixed Issue with zero grand total express checkout for recurring products.
* Fixed "Allow Gift message" setting on the product page doesn't work in Front.
* Fixed "Duplicate" of bundle product leads to an error
* Fixed Catalog sitemap for categories shows inactive sub categories if flat catalog enabled
* Fixed Added support of all product attributes in conditions/actions of salesRules.
* Fixed Disabling product attribute usage in promo rules not affect existing promo rules
* Fixed "Cart Price Rule not working with Product Attributes" (boolean values not properly shown in rule conditions)
* Fixed Wrong amounts invoiced with FPT
* Fixed Wrong order status after refund and additional related issue on frontend during checkout
* Fixed Unable to delete uploaded sample for downloadable product
* Fixed Paypal Direct send wrong billing address to API
* Fixed Incorrect viewing of category settings after refreshing page
* Fixed Catalog price rule discount not working during backend order creation
* Fixed Double headers for session cookie set

==== 1.4.x-devel-80262 ====

== Improvements ==
* Upgraded Zend Framework to version 1.10.8
* Added the Recurring Profiles tab in customer management

== Changes ==
* Deleted Mage_Sales_Model_Recurring_Profile_Info, which was not on its place and added accidentally
* Category and product design settings inheritance logic

== Fixes ==
* Fixed Custom design is not reset properly after shipment comment emails
* Fixed Tax report displays incorrect figures
* Fixed Removed invoice creation on "completed" IPN message with payment_entity = "auth" to prevent double capture creation on single transaction with IPR.
* Fixed Image browser in WYSIWYG editor doesn't fill mouse over/out fields
* Fixed Added rounding to "Refund Shipping" field on credit memo creation page.
* Fixed Added additional error messages to customer address validation on PHP side while creating.
* Fixed "No server side check for password length when customer edits his account information" 
** Also added proper processing for password == '0', earlier it was considered as non-set password
* Fixed WYSIWYG editor breaks directives that are not in src attribute
* fixed directives decoding for a case when the secret key is present in URLs
* Fixed Duplicate of a product creates it with no SKU value and is saved
* Fixed Redundant catalog product attribute "category_ids" remains during upgrade from 1.3 to 1.4
* Fixed Reports/Shopping cart/Products in carts optimization
* Fixed "If all Storeviews value set up - disabled --> Front end shows default storeview instead of 404 page"
* Fixed Added error on zero subtotal checkout with paypal express. Removed paypal express button on shopping cart with zero grand total.
* Fixed Field labels and field values are not aligned vertically on Sales Orders in Admin
* Fixed Spacing between field labels and field values is inappropriate on the Recurring Profiles tab in My Account section
* Fixed Not searchable attributes are searched by Quick search.
** Checking if attribute used in quick search before adding to fulltext field
* Fixed Mage_Customer_Model_Customer::getGroupId can't return zero value
* Fixed #23184: Huge memory consumption on flat shipping rates import
* Optimized and refactored Table Rate import
* Fixed Scrolling during category load results in some js-errors
* Fixed "Javascript alert on "manage category" page"
* Fixed Security Vulnerability on Mage_Core_Block_Template level
* Fixed Merged CSS breaks Secure Pages (https)

==== 1.4.x-devel-79607 ====

== Improvements ==
* Implemented cache for shipping rates and fixing issues with rounding

== Changes ==
* Refactored one routine in Inventory Observer to remove code duplication
* Disabling product attribute usage in promo rules not affect existing promo rules

== Fixes ==
* Fixed SOAP webservices do not work when enabling "Add Store Code to URLs"
* Fixed Incorrect displaying of the Start Date entered by customer while adding to the cart recurring product
* Fixed Downloadable Product "lable" typo
* Fixed While creating gift message from backend it disappears in case of refreshing page
* Fixed Product export fails when the quantity of exported products is 25 000 or more (memory leak in products)
* Fixed While creating gift message from backend it disappears in case of refreshing page
* Fixed Google Chekout: Discount for shipping amount doesn't apply
** onepage checkout recalculates shipping charges after setting the payment method (not solved yet in multishipping)
** added warning about Carrier Calculated Shipping in Google Checkout system configuration
** GC API callback now sets the payment method to quote on requests
** the free shipping calculator now marks the entire address as "free shipping" if all its items have free shipping
* Fixed On wide monitors checkbox "Create Permanent redirect" in admin backend wraps up to the end of input box
* Fixed Tag isn't showed in Product Page and My account->My Tags, if tag are deleted by customer, approved by administrator, added by customer
* Fixed Non standard images make troubles with "Next"/"Previous" buttons
* Fixed There is no validation of the Tracking number field during first time creation of the shipment
* Fixed Missed dollar sign in variable name
* Fixed Incorrect escaping of Mage_Catalog_Model_Abstract::loadByAttribute method
** Zend_DB_Select::where must get null values to skip quoting into $cond empty strings if value is null
* Fixed "URL rewrites duplicating when assigning to root category"
* Fixed Shipping method UPS_XML missing titles
* Fixed The pager is missing for tagged product list
* Fixed Report > Products Ordered ignores Store view switcher
* Fixed Flat catalog index problem after upgrade with customizations present
* Fixed Incorrect bundle items inventory decrements
* Fixed Category and product design settings inheritance
* Fixed Removed fatal error on removing non existent quote item from quote
* Fixed Credit Card Maestro/Solo: The field "Start Date" is not displayed on order information page
** deleted unused Maestro/Solo from Payment module config
** moved Maestro/Switch and Solo card definition from Chronopay to Payment module config
** deleted Meastro/Switch definition with incorrect code MS from Cybersource module config
** fixed logic of showing "Issue number" and "Start Date" of Switch/Solo card on frontend
* Added warning about offline refund
* Fixed Mage_Checkout_Block_Cart_Item_Renderer::getIsInStock bug
* Fixed Fatal on edit configurable product page, if custom required price attribute is used
* Fixed #0011135: View invoice error with changed query string
* Fixed Trailing semi-colon displayed on Profile Export page
* Fixed New Orders & Other Authenticated RSS feeds should use HTTPS
* Fixed Dataflow export products sku filter works as not "starts with", but "like"
* Fixed Removed default shipping address assign on paypal express checkout
* Fixed The customers from Puerto Rico can't pay with PayPal (Express Checkout in PaypalUk)
* Fixed Shared shopping cart on the stores with different domains
* Fixed Discount amount for the whole cart divide proportionally between all affected items according to their base price and then applied.
* Fixed Removed store selector in single store mode on url rewrite edit page
* Fixed Javascript validator's translation strings missing
* Fixed Quick Search Autocomplete does not work via ajax http protocol for https page
* Fixed Inventory->Qty Increments - unable to add
* Fixed Loading search query performance issue
* Fixed Changed labels in checkout and payment information blocs for credit cards Solo Maestro Switch 
* Fixed Product q-ty doesnt decrease after google checkout
** added same 'checkout_submit_all_after' event to  AmazonPayments
** removed 'TODO' notice from Multishipping Checkout, because current scheme is better and will not be influenced by any Multishipping refactoring
** fixed Observer reaction on 'checkout_submit_all_after' to include needed reindexing
* Added checkout_multishipping_controller_success_action and checkout_onepage_controller_success_action events that pass the created order ids on frontend checkout success actions
* Fixed Google Analytics tracking pages with wrong URI:
** Completely reimplemented googleanalytics/ga block:
*** it doesn't depend on session/quote, but just uses order_ids, if passed
*** the page_name parameter is reimplemented as it was intended to be: an optional parameter that can be customized via layout for certain actions
*** moved out the integration part with google checkout to observer
*** eCommerce tracking passes shipping address instead of the billing address, if available
*** replaced the "affiliation" into store frontend name in eCommerce tracking (as it is intended to be)
*** eliminated passing order item "category" in eCommerce tracking (that never existed)
*** optimized javascript code of GA with Google Checkout integration
** Eliminated mutual code coupling between Google Analytics and Google Checkout modules
** Improved integration of Google Analytics and Google Checkout:
*** the GA integration should appear only when GC buttons are available
*** there will be no integration when there is no GA tracking code configured
*** the GA/GC integration seems like wasn't working because there was no pageTracker js variable accessible to the GC scripts
* Fixed Wrong links in backend to "New Products/Low Stock/Customer reviews" RSS feeds
* Fixed "Send auto-generated password" generates e-mail with incorrect template
* Fixed Unable to refund Credit Memo because of Shipping Rounding
* Fixed Added custom option info to recurring profile info page on frontend and backend.
* Fixed Product Visibility and Status disappear when in search
* Fixed Removed validation of new customer shipping address on backend for orders with virtual products only 


==== 1.4.x-devel-78617 ====

== Improvements ==
* Design packages and themes optimization/refactoring/improvements:
** minor improvements and fixes
** improved upgrade-ability of CE themes
* iPhone Theme Refactoring
* Added Widget settings sharing between widget types
* For Invoices, Shipment, Credit Memos added possibility to show admin comments at user frontend (checkboxes "Visible on Frontend" in admin interface)
** Added JS to enables/disable checkbox 'Append Comments' depending on checkbox 'Email Order Confirmation'
** Refactored invoice/shipment/refund comments collections models to one abstract Comment Collection Model
** Refactored Block Order Invoice/Shipment/Creditmemo comments to usage of common block and design - Block Order Comments
* A little more accurate profiler - important for very quick measurements
* Add Shopping Cart API
* Implementing payment refund notifications
* Added website price scope for bundle items
* Added support of pending transaction to payflow pro. Also fixed "denied payment review" message in payment

== Changes ==
* Refactoring validation states for Centinel
** Added template method Mage_Centinel_Model_StateAbstract::isLookupSuccessful
* Add boolean type for catalog price rules and condition for category_ids
* Removed Maestro/Switch/Solo card from system. Added Maestro/Switch and Solo cards to Chronopay and Cybersource methods
* Mage_Adminhtml_Block_Sales_Order_Creditmemo block had dependence from 'canCapture' 'canCapturePartial'. It was changed to 'canRefund' 'canRefundPartialPerInvoice'. For set result of Mage_Adminhtml_Block_Sales_Items_Abstract::CanEditQty`s we can use setCanEditQty
* Added Maestro/Switch and Solo Dollars card types for paypal_direct payment method. Also removed Maestro/Solo/Switch card type for this method
* Removed "Shipping address" block on recurring profile view page if product is virtual. Also fixed virtual order detection
* Refactored PayPal cart line items and cart totals calculation to accommodate various discounts and tax settings
** added hidden discount and hidden shipping taxes to the calculation
** eliminated cart line items logic from the helper, moved it to the paypal/cart model
** simplified transferring of the totals and line items to PayPal API objects
* Refactored sales rule discount detection on "buy_x_get_y" rule type
* Added catalog_product table definition to product review collection
* Changed type of obscure input field to 'password', so this field is hidden even when user enters data in it
* Removed dependence to payment method on getting billing agreement method title. For now payment method title stored in billing agreement
* Removed invoice creation thought zero subtotal checkout with new order status "pending"

== Fixes ==
* Fixed ability to buy Product which have status "Out of Stock" through a direct link on button "Checkout with PayPal"
* Fixed All free shipping methods in absent in Transfer Shipping Options menu on PayPal side
* Fixed Payment methods titles for the PDF prints through admin gets from default config instead of the storeview config
* Fixed PayPal and Puerto Rico shipping address
* Fixed "Transfer Shipping Options" pass on PayPal side not correct value for Flat Rate method
* Fixed Centinel JCB validation test cases 8-9
* Fixed Saving caterory in store view scope
* Fixed Attribute upgrades moved from 1.4.0.0.15 to 1.4.0.0.33
* Fixed that product tagged by administrator has wrong URL at front-end
* Fixed refusal from Card Verification (through link Exit), does not allow to place order repeatedly
** If lookup was filed and customer tries again we will do new lookup.
** If lookup was success and customer tries again without some changes we will not do new lookup
** If authentication was filed and customer tries again we will do new lookup and authentication
** If authentication was success and customer tries again without some changes we will not do new lookup and authentication
* Fixed #22536: Light-weight email templates. Wishlist share email fix
* Fixed declaration of Mage_Cybersource_Model_Api_ExtendedSoapClient::__doRequest() compatibility with SoapClient::__doRequest()
* Fixed Two registration emails from a wrong store and without a logo are sent when a customer is created in Admin panel
* Fixed Reindex for bundle products with date fields
* Fixed Status is "Ready" instead to be "Reindex required" then creating new subcategory in mode "Manual Update"
** index status changed to STATUS_REQUIRE_REINDEX when search engine changes
* Fixed #23321: Wrong type casting in method
* Fixed Print-All Includes Tracking # from All Shipments on Every Shipment
* Fixed Ignored 'Include in Navigation Menu' category option with enabled flat catalog.
* Fixed Admin unable to add Image through WYSIWYG to description and Short description without intermediate product saving
* Fixed QTY decrement after multishipping
* Double clicking adds product to cart twice
* Fixed Catalog Price Rule(for NOT LOGGEN IN customers) is not applied for shopping cart and while checkout as guest or while first registration.
* Fixed Payment methods titles for the PDF prints through admin gets from default config instead of the storeview config
* Fixed Mage_Adminhtml_Model_System_Config_Backend_Serialized::_afterLoad() does not check input for unserialize()
* Fixed Sending letters through "Contact Us" form, leads to error
* Fixed PayPal Express with Flat Rate: incorrect counting Shipping amounts per order
* Fixed Saving attribute value in store view scope only causes data loss.
* Fixed #22607: Dispose of Mage_GiftRegistry module
* Fixed Related products are not saved when you attach them to a product
* Fixed Added qty to bundle unit price calculation to quote totals recalculating.
* Fixed Saving category cause: 'Exception' with message 'File was not uploaded.' in /home/vadim.kusakin/dev/qa/2759/lib/Varien/File/Uploader.php:139
* Fixed Fixed MAGE-638 Magento Connect -> MCM -> If agreement checkbox is unchecked, "Continue" button should be disabled
* Fixed Set the same column font size as in cells in PDF documents printing
* Fixed Home page appears instead of predefined 404 page
* Fixed Removed converting of "is one of" and "is not one of" values in decimal.
* Fixed Wrong column type for order_increment_id on Invoice, Shipments, Creditmemo grids
** order_increment_id was setted as "text" instead of "number" type
* Fixed Inconsistency with credit memos showing buttons online vs offline
* Fixed PayPal Express shortcut is missed on product page
* Fixed An email is sent to a customer after its profile is edited in the Admin panel
* Fixed that Payflow Pro includes only the first line of billing/shipping addresses into request
* Fixed Incorrect showing of product page when inputing a product description with table which have attribute align = left
* Fixed Wrong link for bestsellers in admin dashboard. Grids.php fixture doesn't do anything for this bug - just to beautify code.
* Fixed Added fixes to reports - base_discount_amount is actually kept negative in DB.
* Fixed Empty dropdown 'status' at the creation New Review Grid.
* Fixed Incorrect work of "Recently Compared Products" functional on category's page
* Fixed behavior when having single store, javascript raises exception and all followed code is not executed
* Fixed that Special price for dynamic bundle applies twice
* Fixed #21960: Labels in page/html_wrapper and core/text_list in layout 
* Fixed GUI bugs on Recurrent Profile frontend part
* Fixed Magento Connect -> Message about invalid URL is duplicated
* Fixed that suspend Recurring Profile from front side leads to error
* Fixed Missing pager for tagged product list
* Fixed Wrong profiler output for getUrl in Category
* Fixed Saving of billing agreement relation with order - added force billing agreement re-saving and fixed isValid method in agreement detection.  
* Fixed Incorrect sort order reliable on mysql internal order during eav attribute load
** move prepare select to separate method
* Fixed passing additional totals to PayPal when cart line items are disabled:
** simplified paypal/abstract api to just set the paypal/cart instance and the needed configuration settings
** moved workarounds of setting shipping and discount totals as line items into the appropriate APIs: WPS and NVP
* Fixed In My product Review short description HTML tags are shown
* Fixed that Refund from google chekout don't display on the order in Magento
* Fixed that "Compare Products" block does not appear on the category page and product page
* Fixed Non-existing attribute's source model causes fatal error
* Fixed Varien_Db_Select memory leak


==== 1.4.x-devel-77975 ====

== Improvements ==
* Upgraded Zend Framework to version 1.10.5
* Upgraded TinyMCE to v.3.3.7
* Added to prototype validation by length min-length validation
* Added Varien.DateElement for front-end date form fields and re-implemented Varien.DOB
* Added functionality to disable dashboard charts in backend (System > Configuration > Admin > Dashboard)
* Added functionality to disable dashboard charts during installation
* Adminhtml W3C Validation improvements
* Added ability to use session save method from configuration

== Changes ==
* Removed SID from url generation when Use SID on Frontend option is disabled
* Added customer session validation for loadCustomerQuote method
* Iphone clears.css has been deleted

== Fixes ==
* Fixed #18569: Gift Messages not in OrderInfo returned array
* Fixed PayPal API credentials wizard popup size
* Fixed #11449: customer_id is mismatch with entity_id in customer.create
* Fixed merging CSS-files with different skin domain to pick a proper base URL
* Fixed Bad UI style on checkout success page
* Fixed buying more than 1 virtual product in multishipping checkout
* Fixed #22518: Wrong amount for second refund
* Fixed #22776: Bug Causing Recursion Error
* Fixed #22668: Incorrect reports for coupons
* Fixed Products -> Product with "Out of stock" status displayed on frontend, but shouldn't
* Fixed Password miss match for newly created in Back end customer
* Fixed "There has been an error processing your request" page is displayed when specified order status is selected on Reports->Sales->Tax page
* Fixed bug with 'Use Flat Catalog Category'
* Fixed #13770, #16300, #21040 : Product Media Api Broken, product_media.create API overwrites image itself each upload, product_media.update API does not upgrade the image itself
* Fixed #16306: Webservice with htaccess (changes in code style)
* Fixed #22536: Light-weight email templates 
* Fixed #18935: Soap api v2 multiple complexFilters with the same key
* Fixed incorrect Window titles on frontend
* Fixed Eliminated display currency usage (instead of the base website currency) in shopping cart price rule conditions
* Fixed #21146: Magento falls into the white screen when saving URL rewrite for a product on the Default Store View
** corrected syntax mistakes
* Fixed batch of issues related to google checkout:
** Invoice don't create automatically with Google Checkout
** Google checkout invoice duplication
** Automatically authorize the buyer's credit card for the full amount of the order
** Refund from google checkout don't display on the order in Magento
** Google Chekout: Discount for shipping amount doesn't apply
** Different order amount in Google checkout and Magento orders
** Applying of discount for shipping, when using google checkout
** Order is in google sandbox doesn't contain gift card
* Fixed #23461: Wrong attribute value in catalog link widget XML
* Fixed getting complete state for orders with zero grand total when processed
* Added Store id param to billing agreement entity.  Also fixed store setting in billing agreement payment method.
* Fixed fatal error in payment method list fetching (MAGE-500)
* Fixed #22575: Trace error during using filter "Products" on Tags page
* Fixed Grids with settings remain active while disabled PayPal methods
* Fixed configuration merger fatal error when store/website resource structure is inconsistent
* Fixed PayPal admin setup: checkbox problem
* Fixed Adding shipping address transferring on non guest checkout in Paypal Standard
* Fixed "Save in address book" checkbox in the Shipping address area doesn't work while admin order creation
* Fixed pre-selecting default address during checkout
* Fixed Email with empty password is sent to a customer after an order is created in the Admin panel
* Fixed Necessary to add data validation for filed "Trial Billing Frequency" in Recurring Profile
* Fixed "Out of Stock" product is possible to purchase successfully through Shortcut button
* Fixed phpdocs in lib/Varien and removed junk file


==== 1.4.x-devel-77328 ====

== Improvements ==
* Rendering customer attributes
* Added favicon manager under System > Configuration > Design > HTML Head

== Fixes ==
* Fixed #21146: Magento falls into the white screen when saving URL rewrite for a product on the Default Store View
* Fixed #21643: Fixed "wsdl" parameter validation for Soap V2
** Changed class SoapServer with class Zend_Soap_server
** Added ability to set response charset from admin panel: System->Configuration->Magento Core API
* Fixed #21499: Default billing and shipping address
* Fixed #21565: missing "comment" for salesOrderStatusHistoryEntity
* Fixed #20481: Access Control List not retrieved for API user for resources() and resourceFaults() operations
* Fixed #18367: FCGI Error on WSDL Url with Apache and mod_fastcgi
* Fixed #22053: use HTTP 301 code instead of 302 in case of web/url/redirect_to_base
* Fixed #20654: Admin order creation->Move mouse cursor isn't changed into hand while move it on some product for adding 
* Fixed #21590: Attribute 'Date': testing for uniqueness fields not working
* Fixed #21566: Type of attribute 'Price': Possible to add text value for field 'default value'
* Fixed #22053: added optional behavior (301 or 302)
* Fixed #21570: Review from not logged in user is saved in list of All Reviews when "Allow guests to write reviews = No"
* Fixed #22090: Different values of Qty Increments during create and after duplicate products
* Fixed #22489: Eliminate difference between bundle.js in different skins 
* Fixed #22419: Set default stock_data if not exist in create/update product
* Fixed #20227: "Review(x)" link should be added to the compare page.
* Fixed #21570: Review from not logged in user is saved in list of All Reviews when "Allow guests to write reviews = No"
* Fixed #20959: Locale problem in shipping tracking popup raises exception 
* Fixed #21955: Layout cache ignores product column count update
* Fixed #20011: After using filter "Color" or "Manufacture" in Configurable Product meaning from column is disappear
* Fixed #21908: Incorrect attribute ordering in "Compare products" page.
* Fixed #22222: Edit review-> if browse stores in the "Visible In " drop-down, rating values reseted 
* Fixed #22075: Product Attribute title specified for StoreView isn't showing on the configurable product's page
* Fixed #22605: catalog_category.level return root categories when website or store are null
* Fixed #21806: Different values display on the shopping cart in front-end and back-end 
* Fixed #20113: Shipping address display as default on the front-end and as not default on admin for one customer 
* Fixed #22575: Trace error during using filter "Products" on Tags page
** added 'filter_index' to array parameter in addColumn() method call
* Fixed #14591: Incorrect SKU for Configurable Product with Custom Options 
* Fixed #22476: Blank Column in Related Products Grid
** deleted duplicate <col> output for editable columns
* Fixed #22575: Trace error during using filter "Products" on Tags page
** apply filter_index field values to index
* Fixed #22644: A discrepancy between GT(Base) and GT(Purchased) 
* Fixed #22645: Incorrect original price when using custom price in order. 
* Fixed #22653: Missed checking for file existents in JS/CSS merger
** cheking in source file exists. If not - do not check last modification and force to merge target file again
* Fixed #22594: Unable to place orders through checkout with multiple addresses with PayPal direct + zero subtotal for one order 
* Fixed #21185: Newsletter confirmed automatically BEFORE account email is confirmed. 
* Fixed #22167: "Add new row" button in downloadable product 
* Fixed #21952: BUG - Category / Url Model (UYN-886991) 
* Fixed #15334, #17794
** API category did not pass validation process due to available_sort_by must be ArrayOfString
** Added category validation for backend (missed)
** Creating separate validation for available_sort_by and default_sort_by attributes
* Fixed #22599 Upgrade from 1.1.8 to 1.8.0.0 database compatibility issues (PARTIAL)
* Fixed #22661: 1 cent bug 
* Fixed #22434: 100% discount of products -> the amounts of Tax and Grand Totals are or negative or not corectly 
* Fixed #10073: Unnecessary option for downloadable products
* Fixed #20014: Qty use decimals for downloadable
* Fixed #22164: Incorrect message for maximum shipping amount
* Fixed #22174: Custom 'Qty to Refund' isn't remembered after message about incorrect amount
* Fixed #22182: The value of 'Customer Since' field to duplicate clients at different sites.
* Fixed #22243: Add new review by admin->type of this review is 'guest', but should be 'administrator'
* Fixed #22313: Time of order creation if not displayed by the "Order Created At (datetime)" template variable.
* Fixed #22348: "Add to card" button is absent for giftcard product in the catalog
* Fixed #22640: Creating customer unable after adress tab manipulations
* Fixed #22670: Credit memo - incorrect shipping price displaying
* Fixed #22798: Excl and Inc. Tax don't display on the Estimate Shipping and Tax block
* Fixed #20088: Admin able to push on-line refund button for the capture off-line invoice
* Fixed #16306: Webservice with htaccess. Added server authorization (.htaccess)
* Fixed #22266: HEADERS ALREADY SENT Error during dataflow import
** Additionally: moveing layout update in separate layout file of dataflow module.
* Fixed #21412: The "Save Attribute" and "Save and Continue Edit" buttons become disabled after saving attribute with attribute code that exists
* Fixed #22844: After login to admin got 404 instead Startup Page 
* Fixed #22852: shopping cart price rule - search by ID - error page 
* Fixed #15897: Unsubscription Email Sender in the Newsletters Subscription Options is not working correctly
* Fixed #15899: Newsletters subscription confirmation in not working
* Fixed #22908: Grid Serializer doesn't handle dropdowns as edit columns
* Fixed #22946: 'Products Tagged by Administrators' grid contains information about product that is assigned by the customer
* Fixed #22935: Issue with Google AdWords and DSMM Code 
* Fixed #22910: view of system/design table with no records under IE 8 
* Fixed #22914: view of URL rewrite table with no records under IE 8
* Fixed #22935: Issue with Google AdWords and DSMM Code 
* Fixed #22536: Light-weight email templates 
* Fixed #23017: Memcache session fallback does not work
* Fixed #22992: Trace appears during create reorder from front-end 
* Fixed #22991: Cannot add items to shopping cart after active 'Use Flat Catalog Product' 
* Fixed #22813: Google base Undefined Offset when Managing attribute mapping
* Fixed #23138: URL rewrite error on product creation
* Added Regions for baltic states and Finland
* Fixed #23092: Memcached and compiler
* Fixed #19804: sorting/searching by "inventory" field
* Fixed #23241: Catalog price rule not correctly appy for customer group
* Fixed #16294: WSDL missing attributes for customerCustomerEntity
* Fixed #22851: Used wrong resource model for api/user
* Fixed #18207: SOAP-ERROR: Parsing Schema: can't import schema from 'http://schemas.xmlsoap.org/soap/encoding/'
* Fixed Fatal error: Call to undefined function eaccelerator_fetch() 



==== 1.4.2.0-beta1 ====

=== Major Highlights ===
* Included new Magento Connect Manager 2

==== 1.4.1.1 ====

=== Changes ===
* Checkout: added dispatching event 'checkout_submit_all_after' into all checkout models
* Centinel: changed event for resetting validation state 
* Added check for Order ID before try to lookup transactions by Transaction Id
* Added cvv field for Mastero/Switch/Solo cards. Also fixed html formatting.
* Re-factored saving relation of billing agreement with order.
* Added Qty Increments update in products mass-update.
* Added ability to update filter map in Varien_Data_Collection_Db
* Added comment about American Express cards in PayPal system configuration (http://www.paypal.com/amexupdate).

=== Fixes ===
* Fixed Tax calculation for Downloadable product in purchase it through PayPal Express Checkout
* Fixed "Notice: Undefined property: Mage_Catalog_Model_Template_Filter::$_useAbsoluteLinks " when you use WISIWYG Editor for field "Description"
* Fixed Website PayPal Standard payment method is not working with Reward Point, Store Credit and gift Cards
* Fixed Multiple address checkout with PauPalUK direct + 3d secure validation. Payment information error. Please start over.
* Fixed Fatal error onBilling Agreement Related page with applied filters
* Fixed The product's "Stock Status" is not changed from "In Stock" to "Out of Stock"
* Fixed Qty of the product continues to decline when the "Decrease Stock When Order is Placed" is set to "No"
* Fixed If set "Manage Stock" to "No": Qty decreasing when product is ordered
* Fixed The bottom part of the list "Payment Method" in SCPR has too much free place
** if title of Payment Method is empty, get it from overloaded configData('title') method of concrete Payment Method class
** rework. Delegate to Mage::helper('payment')->getPaymentMethodList method for retrieve all payment methods
** fixed by used new config features in 1.4.1 ver - <config_path> in system.xml
** delete getConfigData method
** add config_path with 'payment' section to each field in system.xml
** in sql-upgrade change path to 'payment' section in core_config_data table
* Fixed tax calculation in case Unit Price Tax with settings applying customer tax "After Discount".
* Fixed Solo cards JS validation. Added expdate field to solo and maestro cards. Also removed some duplicates in credit card IIN ranges.
* Fixed Maestro/Switch/Solo cards js validation on payment form: Added additional issue_number and issue_date checks.
* Fixed fatal error in catalog/shopping cart rules based on recently deleted attribute.
* Fixed incorrect redirect after order placing failed, during second try of order placing.
* Fixed exception when "Created At" filter used on Transactions page.
* Fixed incorrect redirect during multishipping checkout as guest.
* Fixed issue with updating qty and addresses during checkout with multiple addresses which resets shipping address to the default billing address.
* Payflow pro:
** "Sale" action does not work.
** Missed transaction ID on fraud services filter triggered.
** Sub-standard order processing flow control and verbosity.
** Inappropriate "state" passed to the gateway in the order addresses.
* Fixed centinel JCB validation.
* Fixed #14885: Unable to upload products into GoogleBase.
* Fixed issue with creating credit memo for partial capture online invoice for the order witch where placed through Website Payments Pro (Payflow Edition) Payment method.
* PayPal: fixed grammar in payment form/redirect text messages (EC, WPS)
* Fixed: Subscribe to Order Status at the front end causing Fatal error: Call to undefined method Mage_Sales_Model_Mysql4_Order_Invoice::getDefaultAttributes() in app/code/core/Mage/Eav/Model/Config.php on line 438
* Fixed fatal error when a configured payment method doesn't exist anymore
* Fixed fatal error: Call to a member function getError() on a non-object in app/code/core/Mage/Shipping/Model/Shipping.php on line 143
* Fixed syntax error caused by accidental manual conflict resolving in Mage_Api_Model_Server_Adapter_Soap
* Fixed qty increments checking business logic for bundle products
* Fixed Mage_Sales_Model_Mysql4_Order_Collection::addFieldToSearchFilter() to be compatible with flat sales structure
* Fixed salesOrderList() broken API call
* Fixed #18534: order_increment_id empty with api salesOrderInvoiceInfo
* Fixed missing files and typo in Mage_Sales_Model_Order::prepareShipment() method described at http://www.magentocommerce.com/boards/viewthread/195761/P0/#top
* Fixed adding tracking for sales_order_shipment.create API call; fixed #17820: Api v2 Shippment create not working
* Fixed upgrading Sales module from backported 1.3 to 1.4: copied 0.9.38-0.9.39 upgrades to 1.3.99-1.4.0.0

=== Known Issue ===
* Google checkout notification duplicates orders or double-process them on timeouts



==== 1.4.x-devel-73934 ====

=== Changes ===
* Re-factored saving relation of billing agreement with order.
* Added Qty Increments update in products mass-update.

== Fixes ==
* Fixed tax calculation in case Unit Price Tax with settings applying customer tax "After Discount".
* Fixed Solo cards JS validation. Added expdate field to solo and maestro cards. Also removed some duplicates in credit card IIN ranges.
* Fixed Maestro/Switch/Solo cards js validation on payment form: Added additional issue_number and issue_date checks.
* Fixed fatal error in catalog/shopping cart rules based on recently deleted attribute.
* Fixed incorrect redirect after order placing failed, during second try of order placing.
* Fixed exception when "Created At" filter used on Transactions page.
* Fixed incorrect redirect during multishipping checkout as guest.
* Fixed issue with updating qty and addresses during checkout with multiple addresses which resets shipping address to the default billing address.
* Payflow pro:
** "Sale" action does not work.
** Missed transaction ID on fraud services filter triggered.
** Sub-standard order processing flow control and verbosity.
** Inappropriate "state" passed to the gateway in the order addresses.
* Fixed centinel JCB validation.
* Fixed #14885: Unable to upload products into GoogleBase.
* Fixed issue with creating credit memo for partial capture online invoice for the order witch where placed through Website Payments Pro (Payflow Edition) Payment method.

==== 1.4.x-devel-71052 ====

=== Fixes ===
* PayPal: fixed grammar in payment form/redirect text messages (EC, WPS)
* Fixed: Subscribe to Order Status at the front end causing Fatal error: Call to undefined method Mage_Sales_Model_Mysql4_Order_Invoice::getDefaultAttributes() in app/code/core/Mage/Eav/Model/Config.php on line 438
* Fixed fatal error when a configured payment method doesn't exist anymore
* Fixed fatal error: Call to a member function getError() on a non-object in app/code/core/Mage/Shipping/Model/Shipping.php on line 143
* Fixed syntax error caused by accidental manual conflict resolving in Mage_Api_Model_Server_Adapter_Soap


==== 1.4.x-devel-70699 ====

=== Changes ===
* Added ability to update filter map in Varien_Data_Collection_Db
* Added comment about American Express cards in PayPal system configuration (http://www.paypal.com/amexupdate).

=== Fixes ===
* Fixed qty increments checking business logic for bundle products
* Fixed Mage_Sales_Model_Mysql4_Order_Collection::addFieldToSearchFilter() to be compatible with flat sales structure
* Fixed salesOrderList() broken API call
* Fixed #18534: order_increment_id empty with api salesOrderInvoiceInfo
* Fixed missing files and typo in Mage_Sales_Model_Order::prepareShipment() method described at http://www.magentocommerce.com/boards/viewthread/195761/P0/#top
* Fixed adding tracking for sales_order_shipment.create API call; fixed #17820: Api v2 Shippment create not working
* Fixed upgrading Sales module from backported 1.3 to 1.4: copied 0.9.38-0.9.39 upgrades to 1.3.99-1.4.0.0


==== 1.4.1.0 ====

=== Improvements ===
* Added ability to use static URLs for media in WYSIWYG or image browser. Added ability to enable parsing {{store}} and {{media}} directives on catalog frontend.
* URL rewrites history: ability to auto-generate custom rewrite with redirect from old to new URL when changing product URL-key
* Added ability to exclude a category from navigation menu
* Various improvements in system configuration UI. Introduced ability to make actual configuration structure to be independent on the system.xml structure
* Added "Only X left" inventory feature
* Implemented Centinel functionality in iphone theme
* Upgraded TinyMCE to v.3.3.2
* Improved PayPal integration, includes:
** Recurring payment profiles entity and purchasing of "subscription" products. In checkout they are treated as "nominal" items.
** Billing agreements
** "Pending Review" order state, "Pending Review" and "Suspected Fraud" order statuses and logic related with this. Triggers by PayPal IPR, FMF and Unilateral payments.
** Functionality of transactions listing/searching and fetching from gateway
** Fetching PayPal settlement reports via SFTP
** Various improvements of PayPal integration on the frontend and admin UI
* Added notice about creating offline creditmemo from order view page.
* Added getter for recurring payment methods in payment helper.
* Implemented abstract block ability to have arbitrary groups of child blocks and a method that returns such a group. Implemented a method that fetches data from child block by specified alias.
* Implemented ability to specify "sort_order" instead of "before" and "after" in the totals declaration. All nominal totals declaration utilize "sort_order"
* Added getter for specified object data by key in core/template block: method getObjectData()
* Defined payment methods grouping, implemented getter for payment method list (with option to group them). Added ability to render grouped options in the "select" grid filter.
** Moneybookers: utilized the payment methods grouping for all its methods; removed redundant "translate" attribute in the methods definition in config.
*** Utilized payment methods grouping for PayPal peyment methods.
* Added more verbosity to PayPal NVP and IPN debugging

=== Changes ===
* Sales module database structure changed from EAV into flat tables
* Product custom URL rewrites redirect to SEF URL, rather than to catalog/product/view/id/
* Reimplemented frontend top menu rendering logic (cross-browser and usability improvements)
* Reviewed [logic of the sales reports|http://www.magentocommerce.com/wiki/doc/sales_reports_specifications]: Orders, Tax, Invoiced, Shipping, Refunds, Coupons
* Reimplemented bestsellers report
* Implemented 3D Secure validation for Maestro International and JCB cards
* (!) Changed Shopping cart methods output (top + bottom): removed <li>-dependance from templates in other modules \-> moved to Checkout module
* Moved the Payflow Pro payment method to PayPal module
* Refactored sales/service_quote model: instead of submit() method the submitAll() should be used. It can submit nominal items separately from the order. The methods for submitting nominal items and order separately - are available as well.
* Refactored onepage checkout model to use the new method sales/service_quote::submitAll(), added recurring profiles and billing agreements passing through the process until the success page
* Utilized child blocks grouping to improve flexibility of rendering additional information in catalog/product/view template. The group is called "detailed_info"; any block from layout may insert itself to this group.
* Removed redundant wrappers hard-coded into some catalog templates. Template of parent block is responsible for wrapping.
* Refactored onepage checkout success block and template: simplified fetching related checkout information, added ability to render billing agreement and recurring profiles that might be created with the payment placement.

=== Fixes ===
* Fixed read/write connection issue during new customer order place. See http://www.magentocommerce.com/boards/viewthread/19363/P0/
* Fixed tax rule ZIP range matching (numeric values were matched as strings)
* Various tax fixes
* Optimized search reindex process

=== Known Issues ===
* PayPal and Payflow pro modules are officially backwards incompatible.
* The `sales_order_aggregated_created` table was re-created with new columns, it is not backwards compatible.

=== Upgrade Path ===
* Once upgraded, go to system configuration section and re-enter all PayPal-related settings carefully. Make sure to specify the proper merchant country and email.




==== 1.4.x-devel-69025 ====

=== Improvements ===
* PayPal integration:
** Settlement reports fetching from SFTP
** Billing Agreements
* Added website and store data to backend model when invoking in system configuration block
* Added "original_data" key to elements when generating system configuration form

=== Changes ===
* Mage_Sales_Model_Order_Payment::canCapture() - move methodInstance::_canCapture before authorization transaction check
* Sales/Payment changes:
** Implemented pending payment review functionality. Includes "Payment Review" order state and statuses "Payment Review" and "Suspected Fraud". In this state the order cannot be fulfilled until the payment is approved.
** Holding orders on pending transactions was replaced in favor of "Payment Review" state. The 'fraud' status was removed from 'holded' order state.
** Transactions resource model unsets the "isObjectNew" if it had a lookup of autoincrement key before saving
** Payment capture and capture notification mark invoice as paid only if needed: when it is pending and the transaction is not pending
** fixed float casting error in Mage_Sales_Model_Order_Payment::_isCaptureFinal()
** fixed showing up credit card type in CC payment block, if there is no credit card type information
* PayPal Instant Payment Review and Fraud Management:
** implemented methods for handling PayPal-specific payment statuses
** added more data importing to payment info in PayPal: payment status, pending reason, "is_fraud_detected"
** added importing of all required for payment processing information in different points of WPP API calls
** implemented IPR and FMF handling for Website Payments Pro methods family (Express Checkout, Direct Payments)
* Fixed PayPal payment info block to not render redundant CC-related information (it extends CC info block)
* (!) Changed Shopping cart methods output (top + bottom): removed <li>-dependance from templates in other modules -> moved to Checkout module
* Added throwing exception on an incorrect attempt of unholding order (TRJ-148987).




==== 1.4.x-devel-68590 ====

=== Improvements ===
  * Implemented serializing/unserializing model fields on abstract level. See Mage_Core_Model_Mysql4_Abstract::$_serializableFields
  * Implemented recurring payment profiles entity and purchasing of "subscription" products. In checkout they are treated as "nominal" items
  * Implemented functionality of transactions listing/searching and fetching from gateway
  * Upgraded TinyMCE to v.3.3.2
  * Added ability to parse "{{media}}" and "{{store}}" CMS directives in the catalog
  * Added ability to insert media content as static URLs in WYSIWYG or media browser mode
  * Implemented "Pending Review" order state, "Pending Review" and "Suspected Fraud" order statuses and logic related with this
  * Added ability to set fieldset always expanded (<expanded> node in system configuration for fieldset)
  * Added ability to set number of "levels up" to form javascript dependencies controller block
  * EAV: implemented a 'serialized' backend model
  * Added ability to separate actual configuration path and form field path in system.xml - use node <config_path>
  * Added ability to render "tooltips" in system configuration fieldsets - use node <tooltip>
  * Enhanced PayPal integration:
    * frontend and backend UI experience of PayPal solutions
    * Instant update API integrataion
    * Recurring payments integration
    * Instant Payment Review and Fraud Management Filters integration
    * EC unilateral payments integration
    * Transactions fetching for PayPal WPP methods

=== Changes ===
  * Reimplemented PayPal system configuration in a dedicated section.
  * Moved Payflow Pro payment method into PayPal module. Got rid of obsolete system configuration fields of this method.
  * Refactored implementation of serializing 'additional_information' field in sales/order_payment, sales/quote_payment and sales/order_payment_transaction
  * Introduced "Is Nominal" term in sales logic:
  * Nominal items participate in catalog, but during checkout and order processing they have zero row total.
  * Implemented separate shopping cart and address totals for nominal items: nominal totals, various changes/adjustments in existing totals
  * Added ability to calculate shipping charges for a quote/address item individually (on code level, utilized by the nominal items)
  * Reviewed credit card types supported by PayPal payment methods
  * Changed skin styles from "tax-total" to more generic "summary-total" (it is used now not only for tax totals, but for nominal items as well)
  * Moved field comments (aka "notes") of the product edit form from the last column under the field element.
  * Varien_Data_Form_Element_Time: added a hidden element with ID to maintain HTML consistency
  * Varien_Data_Form - changed logic of adding suffix/prefix to an element: when element doesn't have a name, the suffix will be result
  * Varien_Data_Form_Abstract and Varien_Data_Form_Element_Abstract: moved adding 'required-entry' class to the element to the moment of its generation instead of the moment of its adding. It adds more flexibility to change properties when the object is not yet rendered.
  * Added to Varien_Data_Collection_Db::_beforeLoad(), moved 'core_collection_abstract_load_before' event dispatching to Mage_Core_Model_Mysql4_Collection_Abstract::_beforeLoad()

=== Fixes ===
  * Fixed #21225: catalogProductUpdate / catalogProductCreate and tier_price attribute
  * Fixed #16596: category.assignedProducts always returns an empty result
  * Fixed js reference to non-existing element when CVV verification disabled and gateway supports SS-type credit cards

=== Known Issues ===
  * PayPal modules and Payflow Pro payment method backwards compatibility is officially not retained.
  * Nominal item total calculations do not work properly for multishipping checkout.




==== 1.4.x-devel-67099 ====

=== Improvements ===
  * Added isModuleEnabled() to core helper; Added ability to hide configuration fields if related module is not enabled (use 'if_module_enabled' node in system.xml)
  * Implemented IDNA domains support in registration and login forms (see also #20203)

=== Fixes ===
  * Fixed #22490: .Biz domain email addresses cause checkout to throw error and return to main Checkout page. Fixed path argument passed to include function in Zend_Validate_Hostname::isValid() to be valid whether source code compiler is used or not
  * Fixed Negative value in Shopping Cart in case Tax Calculation Method Based On Unit Price
  * Fixed Subtotal (Incl.Tax) = -$0.01 during created credit memo with refund shipping
  * Fixed: 100% discount of products -> the amounts of Tax and Grand Totals are or negative or not corectly




==== 1.4.x-devel-66609 ====

=== Improvements ===
  * Implemented 3D Secure validation for Maestro International and JCB cards
  * Added comments to system configuration fields "Catalog" > "Price" > "Catalog Price Scope" and "Currency Setup" > "Currency Options" > "Base Currency" that explain that base currency scope depends on the catalog prices scope.
  * Added note to reports that aggregated data depends on timezone and must be re-aggregated completely after global timezone change.

=== Changes ===
  * Cleaned up iphone theme from redundant files
  * Added Maestro International card type to credit card based payment methods (abstract).
  * Changed option "Notify Customer" into two options "Notify Customer by Email" and "Visible on Frontend" when adding an order comment. All comments that had the old value = 0, will be not visible on the frontend.
  * System configuration option "Sales" -> "Dashboard" -> "Use Aggregated Data" is marked as "beta"
  * Added "delta" rounding during shipping excluding/including tax calculation
  * Added discount tax as line item in PayPal
  * Reviewed logic of the sales reports:
    * Orders
    * Tax
    * Invoiced
    * Shipping
    * Refunds
    * Coupons

=== Fixes ===
  * Fixed issue when product quantity was incorrectly updated in stock after an order is placed for a configurable and a bundle products
  * Fixed #20697: wrong url rewrite resource model
  * Fixed duplicating of coupon code in shopping cart view
  * Fixed Catalog RSS feed showing prices including and excluding tax
  * Fixed #21501: Problem with translate inline and translations
  * Fixed setting URL key when using quick-create for simple products of the configurable.
  * Fixed adding comments to sales documents (invoices, shipments, credit memos)
  * Fixed #21816: Google Analytics Issue with Registration Checkout and Already Logged In
  * Fixed issue with number of orders that were created by Google Checkout
  * Fixed #22199: Duplicated Code - Useless Check
  * Fixed applied tax saving for shipping tax
  * Fixed issue that invoiced orders after cancelling become completed
  * Fixed #21533: Missing tranlation for "This date is a required value" in javascript
  * Fixed: Sales report last update date doesn't change after re-aggregating
  * Fixed rounding special price of selections in bundle product view
  * Fixed one day forward shift of dates in sales reports when showing empty rows
  * Fixed missed calculation of base_total_canceled & total_canceled fields on order cancellation
  * Fixed wrong calculation of base_discount_canceled & base_discount_canceled because of negative values of base_discount_amount in the sales order tables

=== Known Issues ===
  * The `sales_order_aggregated_created` table was re-created with new columns, it is not backwards compatible.



==== 1.4.x-devel-66014 ====

=== Improvements ===
  * Enabled "Refresh" mass-action as default in cache management grid
  * Implemented Centinel functionality in iphone theme
  * Optimized search reindex process a bit

=== Changes ===
  * Added 3rd optional argument to javascript function toggleValueElements(checkbox, container, excludedElements) in tools.js (products mass-update javascript)
  * Fixed #9600: Security compromised, Guest can subscribe a client to the newsletter
    * Checking if subscribing email adress does not belong to another user
    * If confirmation option selected and subscribing email is not user's login email - then confirmation is needed
  * Fixed #21304: Security compromised, guest can spam any email address
    * New config field added into cms -> customer -> newsletter "Allow Guest Subscription"

=== Fixes ===
  * Fixed order taxes report with Match Period To = Order Updated Date (typo)
  * Fixed issue when invoiced and not shipped yet orders after cancelling becomes completed
  * Fixed #21533: Missing tranlation for "This date is a required value" in javascript
  * Fixed stock management checking for a stock item when the stock management is disabled for this item (the check should be bypassed)
  * Fixed "New Products" RSS: added grouped and bundle products
    * Fixed the feed so that it contains grouped products now
    * The feed now shows the same products as shown in category view or "New products" widget (before the fix, incomplete products might be shown)
  * Fixed: virtual / downloadable product isn't deleted from the shopping cart, if change qty to '0'
  * Fixed #21866: 'Master Card' misspelling, should be spelled 'MasterCard' in credit card drop down options in checkout
  * Fixed #21771: Adjustment Refund & Adjustment Fee not showing in View Credit Memo
  * Fixed admin timeout issue inside iframe of Centinel validation
  * Fixed/reviewed tax calculation for components:
    * shipping price including tax in checkout process block
    * order/invoice/creditmemo shipping incl tax calculation
    * applied tax saving for shipping tax
    * applied tax saving for shipping tax
  * Fixed #16577: Dual Order with same Product
  * Fixed: #14502: Newsletter un-subscription message on customer account inappropriate

=== Known Issues ===
  * PayPal Direct PayFlow Edition may stuck with processing orders, if transactions are processed at manager.paypal.com. The problem is that IPN does not contain PNREF - the PayFlow transaction ID. This issue won't be fixed neither on PayPal, nor on Magento side. The only recommendation to merchant is to either process orders on Magento side only or on manager.paypal.com only.




==== 1.4.x-devel-65494 ====

=== Improvements ===
  * Added ability to have a comment for promotion rule fielset, similar to generic fieldset.
  * Added method for getting self child selection options recursively for promotion rule combines
  * Optimized catalog search system configuration fields sort order to make it more extendable.
  * Added icon for some buttons in admin that don't do some action instantly, but redirect to other page.
  * Added cache key generation on core template block level
  * Added ability to register product ids for last viewed products index
  * Added ability to disable observer call with <type>disabled</type> node (after backwards compatibility violation discovered)
  * Performance improvements on Mage_Catalog_Helper_Output::productAttribute method level
  * Added ability to use lazy connection instantiation on EAV resource models
  * Added "_isStraight" flag support on Mage_Core_Controller_Request_Http - allows to process request without additional logic (url rewrites, custom design visitor logging)

=== Changes ===
  * Sales reports refactoring after migration to flat sales structure: added a few indexes, optimized statistics reaggregation, fixed issue with generating statistics in wrong timezone (it was in UTC, but needs to be in the admin timezone)
  * Added Mage_Core_Helper_Abstract::stripTags() and utilized it in templates instead of strip_tags()
  * Improved and optimized base design package templates and layouts, minor fixes in payment method templates.
  * Moved fireEvent() function from adminhtml/events.js to a more generic js.js for future use
  * Added Mage_Core_Model_Config_Data::getFieldsetDataValue($key) - ability to get a neighbour system configuration value in backend model, when saving system configuration
  * Reviewed Magento user interface text labels and messages for proper grammar, informativeness and capital letters usage.
  * Reimplemented top menu rendering logic: implemented Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml(), deprecated Mage_Catalog_Block_Navigation::drawItem() and reimplemented to work through _renderCategoryMenuItemHtml for compatibility
  * Added url rewrites on last viewed products collection
  * Reimplemented products bestsellers report: report uses pre-aggregated data to improve performance
  * Moved logic of reaggregating reports data from sales report controller into separate controller, added bestsellers report handling there

=== Fixes ===
  * Fixed #20782: Wrong prices exc. tax with discount in cart
  * Fixed #21099: Wrong subtotal for manual order entry with manual price
  * Fixed #21271: Price inc tax and exc. tax same for grouped product
  * Fixed grid js object name in grid pager: now it uses block method instead of direct building
  * Fixed changing notification when editing a product in various tabs:
    * Downloadable products: links title (element had no id attribute and thus was omitted by the event dispatcher init code)
    * Custom options: whatever was added with "Add option"
    * Bundles: whatever was added with "Add option"
    * All date input fields when using the calendar widget
    * Prices: tiered prices box, all rows added with "Add tier"
  * Fixed #6321: Add RSS urls to head section
  * Fixed #21831: Tax Calculation Version 1.4.0.1 still incorrect
  * Fixed #12067: iPhone Terms and Conditions Box
  * Fixed #20631: Order totals when creating order from admin do not reflect currently selected currency
  * Fixed #21777: Catalog pricerules
  * Fixed #14591: Incorrect SKU for Configurable Product with Custom Options
  * Fixed #20832: PayPal Standard tax issue: implemented proper tax and discounts validation/transferring with cart line items
  * Fixed #17451: Header Links (top.links.phtml) does not output correctly because it is using the model code (the Toplinks block is deprecated)
  * Fixed #21302: PayPal PayFlow Pro: card expiration date format should be MMYY, not MMYYYY. Also fixed country code typo issue.
  * Fixed #21686: Typo in tag.xml
  * Fixed extra quoting in select html element
  * Fixed XHTML validation errors in admin in some places
  * Fixed #21912: calculation error transfer between multishipping address
  * Fixed typo in PayPal NVP API that caused impossibility to do partial captures




==== 1.4.x-devel-64603 ====

=== Improvements ===
  * Implemented 3D Secure validation for the JCB credit cards
  * Added "Only X Left" feature - an option to show on a product view page how many items remains in stock, if it is lower than specific threshold.
  * (in progress) implementation of #7741: Customer group increase order size . The feature is called "Qty Increments" - to trade items in boxes only. I.e. allow to purchase 6, 12, 18 items etc...

=== Changes ===
  * Refactored frontend navigation menu HTML structure and javascripts: the menu expands and collapses with small delay making it more accessible for users. Fixed possible compatibility issue in Mage_Catalog_Block_Navigation::drawItem() and marked as deprecated after 1.4. Removed local calls of onmouseover/onmouseout events to improve SEO.
  * Added ability to assign id for field containers (TR tag) using node <use_container_id>1</use_container_id> in system configuration
  * Moving widgets.css below in the code for proper styles overriding.
  * Moved JCB credit card declaration and implementation into the Mage_Payment module. Removed it from other modules (they will inherit JCB card from "CC" payment method)
  * Modified Varien_Object_Mapper to check arrays using array_key_exists() instead of isset()
  * Indexer changes (related to the #21031):
    * Removed DROP/CREATE statements for index temporary tables
    * Created static index temporary tables (InnoDB and MEMORY) and separated using those tables in reindexiAll() and reindexEntities()
  * Added ability to set a comment in adminhtml generic fieldset renderer

=== Fixes ===
  * Fixed #21313: Display price including TAX
  * Fixed #21632: Associated products don't get cached
  * Minor bugfixes in 3D Secure integration (API debugging, improvements in css and javascript)
  * 3D Secure integraion - fixed confused constant values in centinel service model
  * Fixed autocomplete in year field on new user registration
  * Fixed _isCaptureNeeded validation for PayPal pro (exception during invoicing captured transaction)
  * Fixed typo in PayPal Direct API variable "AUTHSTATUS3DS" (error in official documentation)
  * Moneybookers:
    * fixed translations in the activation email
    * minor fixes in account confirmation javascript
    * Fixed #21752: Moneybookers configuration per store
  * Fixed #21302: PayPal PayFlow Pro: card expiration date format should be MMYY, not MMYYYY
  * Fixed #20932: unique key in catalog_product_link
  * Fixed #21031: Simultaneous product->save() causes "Base table or view already exists: 1050 Table catalog_product_index_price_idx' already exists




==== 1.4.x-devel-64038 ====

=== Improvements ===
  * Minor CSS improvements in frontend themes
  * Image/media browser minor UI improvements
  * Added default placeholder for skin images in wysiwyg
  * Minor style improvements for widgets insertion overlay
  * Implemented 3D Secure transactions debugging
  * Added ability to set a writer adapter to the Mage::log() and to use Mage::log() regardless of system configuration settings
  * Added Magento Variable icon for WYSIWYG
  * Added ability to append custom class name to main pop-up window container
  * Added explanation comments for Centinel Api Custom URL

=== Changes ===
  * Added element as parameter of system configuration field getCommentText method
  * Added ability to use isObjectNew method of model for object save on resource model level
  * Added additional blocks support on order history and last orders blocks level
  * Made encryption key length check binary-safe
  * Added full exception trace logging to cron_schedule table
  * Moved shopping cart price rule coupon to separate table, improved shopping cart price rule management UI
  * Added ability to specify model for system config field comment generation (system.xml):
    * <comment><model>module/model</model></comment>
    * requires getCommentText method definition from defined model
  * Changed the way how payment methods debug transactions: instead of database the debug information is written into var/log/payment_<method_code>.log
  * Updated text labels in sales reports: terminology for "report type" (period matches to)
  * Added new column 'updated_at' for wishlist table. Changed controller and model logic to save new data.

=== Fixes ===
  * Fixed #21250: HTML code displaying like text in descriptions / List View Displaying HTML Entity Values
  * Fixed #21251: html code shows in category product listing
  * Fixed: Unit Price in Shopping Cart is incorrect when applying a Coupon Code
  * Fixed #18536: Rounding error on Shipping Tax calculations
  * Fixed bugs with row based tax calculation and shipping tax calculation
  * Fixed width/height in WYSIWYG image insertion
  * Fixed authorize.net payment transaction saving during capture
  * Fixed #20890: Incorrect function name
  * Fixed #21055: No Navigation on Advanced Search Results
  * Fixed #20912: memory_limit suffix other than 'M'
  * Fixed #20884: JS bug in Widget/Grid/Column/Action.php
  * Fixed #7228: Credit Memo - Adjustment Fee $ or %
  * Fixed #20832: paypal - standard Tax issue
  * (in progress) UI minor fixes in 3D Secure validation process
  * Added forgotten Moneybookers email template




==== 1.4.x-devel-63512 ====

=== Improvements ===
  * Implemented #6321: Add RSS urls to head section
  * Implemented #7293: Track IP in abandoned cart
  * (in progress) Ability to not include a category into navigation menu

=== Changes ===
  * Refactored Sales module resource from EAV into flat structure.
  * Sales entities data structure changes:
    * Dashboard optimization + configuration option "Use Aggregated Data" for dashboard
    * Inventory: moved stock items qty manipulations out of transaction, fixed qty upgrade logic (x+delta)
    * Added configuration option "Automatically return Credit Memo item to Stock" for refunds autogeneration
    * Removed downloadable products FK relation with sales module
    * Sales order tax logic moved to tax module and relation with sales module by FK
  * Sales, SalesRule and Checkout modules changes:
    * Added product customer group property validation on sales rules level
    * Added ability to assign quote object to checkout cart model
    * Prevented redundant customer model load in customer address
    * Optimized saveDownloadableOrderItem item in downloadable product observer
  * Prevented double "order by" in collection select statement
  * Added _beforeLoad support and not changed object save protection on core abstract level
  * Extended abstract collection with add/remove fields to/from select
  * Escaped html entities in mail form in 404, 503 and report.php error pages, prevented errors if global array $_SERVER is undefined
  * Minor text changes in PayPal modules
  * Added not existin observers methods calls protection
  * Separated tax shipping total from tax subtotal. Now taxes for store prices (code tax_subtotal) calculates before shipping, then calculates shipping (code shipping) and taxes for shipping (code tax_shipping) and then calculates customer taxes (code tax).


=== Fixes ===
  * Fixed #21061: Global country tax applied instead of specific state tax
  * Fixed catalog price rules different sorting when applying the rule vs. saving the product
  * Fixed #20603: Async Google Analytics throws js error (_gaq not defined)
  * Fixed SQL error possibility when adding bundle to cart
  * Fixed #16684: ini_set of auto_detect_line_endings during Varien_Io_File::streamReadCsv
  * Fixed #17748: Category chooser at price rules
  * Fixed #20161: Special From Date for website
  * Fixed Fatal error: Call to undefined method Mage_Admin_Model_Observer::actionPostDispatchAdmin() in \app\code\core\Mage\Core\Model\App.php on line 1207 (backward compatibility)




==== 1.4.x-devel-62916 ====

=== Improvements ===
  * Improved visual design of widget and variable insertion, and media browser overlay
  * Product custom URL rewrites redirect to SEF URL, rather than to catalog/product/view/id/
  * URL rewrites history: ability to auto-generate custom rewrite with redirect from old to new URL when changing product URL-key
  * Optimized getAttributeRawValue() method in catalog module for retrieving more then one attributes

=== Changes ===
  * Added javascript validation for JCB cards
  * Changed confusing error message about quantity in shopping cart into proper one
  * Added comments collection loading when invoice, credit memo or shipment created with adding comment: needed before adding first comment.
  * Added Varien_Db_Ddl_Table
  * Added method createTable from DDL to Varien_Db_Apater_Pdo_Mysql
  * Removed getting Varien_Object id in Varien_Debug

=== Fixes ===
  * Fixed read/write connection issue during new customer order place. See http://www.magentocommerce.com/boards/viewthread/19363/P0/
  * Fixed confusion with admin page title when editing product
  * Fixed bug in Mage_Bundle_Model_Product_Type::getSelectionsCollection(): retrieved collection depends on passed optionIds only on first method call
  * Fixed: New products RSS feed appears instead of the Special products RSS feed
  * Fixed tax rule ZIP range matching (numeric values were matched as strings)
  * Fixed #14055: New orders RSS feed displaying incorrect customer name
  * Fixed #19192: Error when product inventory messed up on viewing order.
  * Fixed minor visual design issues in themes and skins
  * Fixed getting secure host URL in 404, 503 and report.php error pages
  * Fixed up filtering of filenames of uploaded files
  * Fixed position issue for cross-sell products
  * Fixed #20372: importing images
  * Fixed: #17845: Validation and Ampersand Flaws in Layered Navigation and other locations that use the fake query string
  * Fixed #15592: Mage_Adminhtml_Model_System_Config_Source_Shipping_Allowedmethods::toOptionArray() not compatiable with parent method
  * Made proper validate() independent of submit in form.js (Visions contribution)
  * Fixed incorrect js logic on order create backend page (Visions contribution):
    * Fixed: when create order, it is not possible to resubmit after initial validation failed (because submit button is disabled)
    * Improved client side validation that new order has shipping address (it is required to click "get shipping method and rates"
    * Improved client side validation that payment method is selected (like in checkout of frontend)
  * Improved usability of sales admin (Visions patch):
    * added ability to export csv or excel for orders, shipments, creditmemos, invoices
    * made filter for creditmemo and shipment type text so it is possible to just enter one id and find object looking for (unified with orders and invoices, there it is already text not number)
  * Fixed #17659: UPS Minimum Weight Required for Negotiated Rates
  * Fixed #20580: Index module not translated

=== Known Issues ===
  * It is impossible to run more than one 3D Secure card validations simultaneously in one session. Not fixable.




==== 1.4.0.1 ====

=== Changes ===

  * The error report exception printing is disabled by default for security reasons. To print the error report, copy the errors/local.xml.sample to errors/local.xml
  * XSS vulnerabilities review
  * Added Phoenix_Moneybookers payment method module (from now bundled in Magento out of the box)

=== Fixes ===

  * Fixed #20680: Catalog - Google Sitemap
  * Fixed #20024: Error message 'Data saving problem' when try to checkout with multiple addresses (when address deleted during multishipping process)
  * Fixed #20625: Fatal error: Exception thrown without a stack frame in Unknown on line 0 (Fixed cache backend instantiation when a shared PEAR library is in the include path)
  * Fixed issues of upgrading from 1.3.x to 1.4.x through Magento Connect in some installations
  * Fixed #20659: Unable to choose images for upload (duplicates: #20588, #20573, #20616, #20595)
  * Fixed shell cron script runner
  * Refixed #17963: Ampersand in Search Breadcrumb: Double-encoded

=== Upgrade Notes ===

  * We highly recommend disabling Magento cache before upgrading
  * In layout of any custom theme the usage of catalog/product_list_toolbar block should be changed to page/html_pager:
    1) Replace the catalog/product/list/toolbar.phtml of your theme by the new one
    2) Update catalog.xml layout: <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml"> should be replaced into <block type="page/html_pager" name="product_list_toolbar_pager"/>




==== 1.4.0.0 ====

=== 1.4 Major Improvements since 1.3 ===
  * Implemented 3D Secure credit card validation (Visa and Mastercard)
  * Full reimplementation of PayPal modules, includes lot of new functionality and numerous bugfixes
  * Full review of frontend themes, introduced design cross-package fallback and the base/default theme. Includes SEO and accessibility enhancements. Changes are oriented to dramatically reduce themes maintenance.
  * Added ability to define arbitrary cache backends
  * Optimized performance of sales reports, added new sales report types
  * Added image/media uploader/browser, that can browse entire media folder
  * Optimized performance of search indexer
  * Made order processing workflow more informative and severe
  * Reimplemented 404 and report pages, introduced 503 page, specifically for maintenance purposes
  * Improved javascript files merging, added CSS files merging
  * Added Widgets functionality, added several widgets out of the box
  * Added Custom Variables functionality
  * Added lot of new System Configuration options
  * Improved order placement reliability
  * Added WYSIWYG for CMS and Catalog
  * Optimized cache initialization during startup
  * Optimized export from grids in admin area
  * Improved tax and discount totals calculation
  * Replaced admin notification flash popup into a simple HTML overlay
  * Implemented product and category URLs per store view
  * Added ability to configure entry point using virtualhost environment configuration, rather than creating another physical entry point
  * Optimized simple product view without custom options

=== Coommunity Edition Changes since 1.4.0.0-rc1 ===

== Improvements ==
  * Implemented 3D Secure credit card (Visa, Mastercard) validation for payment methods:
    * Saved CC
    * PayPal Website Payments Pro - Direct Payments
    * PayPal Website Payments Pro (Payflow Edition) - Direct Paymens
    * Payflow Pro
  * Improved modern theme: significantly reduced number of files in virtue of cross-package fallback to base/default theme
  * Implemented #11012: Support canonical link tag
  * Implemented WYSIWYG for newsletter templates
  * Minor improvements in sales reports
  * Renamed button "Refund" to "Refund Offline" on Credit Memo page for order
  * 19963: Mage_Eav_Model_Entity_Setup::addAttributeToGroup() (visions patch)
  * improved print.css for CE themes
  * SEO and accessibility improvements in default/default, default/modern and default/blank themes
  * left and right callouts templates, both callouts images and links are now controlled via catalog.xml
  * Added relevant page titles in admin area
  * Implemented column decorators and ability to use getter callback in admin grids
  * Made fetching payment methods sort order properly: via getConfigData() rather getStoreConfig() (optimization for 3rd-party customizations)
  * Implemented ability for page/html_wrapper block to not render the wrapper tag, made it output children sorted
  * Implemented wrappers for inserting additional blocks in:
    * before shopping cart line items list
    * before onepage checkout login/registration form
    * before customer registration form
    * before newsletter subcription form (customer "My Account")
    * before product review form
    * before product tag submission form (product view page)
  * Implemented giropay integration with PayPal Express Checkout
  * Added before/after initialize and before/after validate events to opcheckout.js
  * Optimized products toolbar functionality, prevent saving to session default grid parameters (for sorting, pager etc.)
  * Added filter by website in "Last ordered items" block

== Changes ===
  * PayPal Website Payments Pro (Payflow Edition) is completely rewritten, as extending Mage_Paypal module. With breaking code backwards compatibility.
  * Mage_Core_Model_Flag - moved setting flag_code to _construct()
  * AmazonPayments module is removed from package and will be available as a separate extension on Magento Connect
  * #19595: Varien_File_Uploader_Image not working - class is deprecated and should not be used
  * Marked dead code Mage_Checkout_Model_Type_Abstract::_emailOrderConfirmation() as deprecated
  * Reimplemented 404, 503 and report.php error pages: now fully configurable from errors/local.xml, with ability to override theme per entry point or even store view
  * error report doesn't disclose the trace by default anymore
  * Added to Catalog Product Price indexer upgrade operation by removing old temporary index tables if exists
  * Product image uploader security measurements:
    * disabled ability to run php scripts in "media" folder
    * added callback validation to File/Uploader.php
    * added image file validation to Catalog/Product/GalleryController.php
  * Prevented flushing output buffer caused by exceptions in templates included by core/template block
  * added default _type param to Design Package getters in core/design_package model
  * Added additional qty parameter to event 'catalog_product_get_final_price'
  * Updated sales sql-upgrades: fixed missing table prefixes in some places, rewrote adding foreign keys via methods
  * Implemented 'any-value-validate' logic for Catalog Rules; common methods moved to parent (Mage_CatalogRule_Model_Rule_Condition_Product) class
  * Expanded width of fields on product and category edit pages
  * Added ability to render number sign in currency and number grid renderers
  * Fixed datetime grid renderer to make it use getters (see parent class)
  * Added Mage_Core_Block_Abstract::escapeHtml() instead of htmlEscape()
  * Added ability to make output optional in page/html_pager block (when items total quantity is less than page size)
  * Added ability disable product list toolbar params saving to session
  * Added sorting by param name to query params part of url
  * Made page/html_wrapper block treat children empty output as if there are no children.
  * Implemented dynamic BN codes for PayPal. Pattern: Varien_Cart_(EC|DP|WPS)[_<country_code>] where country code is one of 18 country codes currently PayPal has localized market sites.  * Fixed session cookie renew functionality, added ability define cookie settings for javescript methods
  * When LN filter for an anchor category is active not allow to use display mode "Static Block Only"
  * Sales: made online operations and notifications updating "online" totals, instead of totals mixed with online/offline sales documents. Removed updating "base_amount_canceled" total update when voided payment (this was backwards compatibility violation)

== Fixes ==
  * Fixed 'tax_rate_data_fetch' event params
  * Minor fixes in PayPal Express Checkout and PayPal Direct (non-reported bugs, terminology issues)
  * Fixed #16210: Input field size decreased in category products grid
  * Fixed #17281: Google Checkout: Incorrect assigning of [parent_id]
  * Fixed #14251: Google Checkout still does not allow free shipping
  * Fixed #11412: Rounding error in tax and shipping calculation
  * Fixed #11836: No authentication on customer reviews url
  * Fixed #13511: "Default web url" does not work as expected
  * Fixed #14469: Newly created products for configurable products do not stick
  * Fixed #14915: Invoice payment capture _needToAddDummy bug
  * Fixed #15235: Special price bug with multiple websites
  * Fixed #16425: printing in admin breaks top menu
  * Fixed #16499: Require customer login for reviews not 100% working
  * Fixed #17058: Currency Switch won't work on first time in shop frontend (session id issue)
  * Fixed #17504: Birthday getting swapped (Month and Day)
  * Fixed #17720: core_flag primary key is a smallint and has a max value of 65535
  * Fixed #17793: Google Base Special Price not mapped to Price
  * Fixed #Fixed #18127: Bundle Products pricing incorrectly when not required
  * Fixed #18341: Bugs in dataflow: number of records
  * Fixed #18745: Customer Import shouldn't send email
  * Fixed #18868: Unable to use Mage::log() before config is read
  * Fixed #19290: Changing 'My Account' info may destroy log in when password is blank
  * Fixed some XSS vulnerabilities in admin
  * Fixed #19448: Incorrect handling of empty attributes under PHP 5.2.0
  * Fixed #19449: Google Base
  * Fixed USPS First Class International and USPS Express Mail International shipping method that stopped working after gateway changes
  * Fixed #19512: /index.php/checkout/onepage/getAddress/address/ allows everyone logged in to get all addresses
  * Tax rates edit form won't clean on validation error anymore
  * Fixed #19702: getLastOrderId missing parameter
  * Fixed #19729: unable to translate "Display product options in" and "Product Type"
  * Fixed #19753: Compare products page breaks if no attributes are marked as "Comparable"
  * Fixed #19791: Shipment tracking not displayed from admin panel with store code in URLs enabled
  * Fixed #19838: missing two escape characters in validation.js at the validate-email regex
  * Fixed #19873: Minor warning fix
  * Fixed #19904: please remove double file extensions in filenames of uploaded files
  * Fixed #19954: Undefined variable
  * Fixed #19960: Google Analytics Asynchronous Tracking Code
  * Fixed #19964: cart sidebar shows zero total when displayed including tax
  * Fixed #19969: Css is wong for gift-message-form
  * Fixed #20023: Admin login is very slow when widgets.magentocommerce.com is down
  * Fixed #20080: Dataflow Profiles Need to be Sorted
  * Fixed #20250: Search'n'replace oversight
  * A few fixes in URL rewrites logic
  * Fixed #20350: WRONG "XML_PATH_SCHEDULE_GENERATE_EVERY"
  * Fixed #20361: Move Category Failed
  * Fixed #6564: Transactional Email Templates Using alt="Magento"
  * Fixed #8514: Negative Number in Sorting
  * Fixed Price indexer website date/rate
  * Fixed tier_price and website table names in Catalog Product Price Default indexer
  * Fixed command line installation - fatal caused by improper website initialization
  * Implemented correct setting attributes to entity including situation when there are no attribute value for default sore
  * Fixed #19263: Adminhtml Html Error: Double </label>
  * Fixed "undefined index" notice when saving Table Rates without uploading import rates file.
